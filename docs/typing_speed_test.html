<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Typing Master | Speed Test Game</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Test your typing speed (WPM) with sound effects. Professional typing practice game with difficulty levels, themes, and high score tracking.">
    <meta name="keywords" content="typing speed test, wpm test, typing game, mechanical keyboard sound, typing master online, touch typing, coding typing test">
    <meta name="author" content="Free Online Tools">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        /* Base Variables for Themes */
        :root {
            --bg-color: #0f172a;
            --text-color: #f8fafc;
            --primary-color: #fb923c; /* Orange */
            --secondary-color: #1e293b;
        }

        body { font-family: 'Inter', sans-serif; background-color: var(--bg-color); color: var(--text-color); transition: background-color 0.3s, color 0.3s; }
        .font-mono { font-family: 'Roboto Mono', monospace; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        /* Typing Area Styles */
        .typing-text { position: relative; }
        .typing-text span {
            position: relative;
            margin-right: 2px;
            color: #64748b; 
            transition: color 0.1s;
        }
        .typing-text span.correct { color: #e2e8f0; }
        .typing-text span.incorrect {
            color: #ef4444; 
            text-decoration: underline;
            text-decoration-color: #ef4444;
        }
        
        /* Smooth Caret Animation */
        #cursor {
            position: absolute;
            width: 3px;
            height: 1.4em;
            background-color: var(--primary-color);
            transition: left 0.08s ease-out, top 0.1s ease-out;
            z-index: 10;
            border-radius: 2px;
            animation: blink 1s infinite;
            display: none; /* Hidden until loaded */
        }
        .typing-active #cursor { animation: none; opacity: 1; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
        
        .input-field { position: absolute; z-index: -999; opacity: 0; top: 0; left: 0; }
        
        /* Theme Classes */
        body.theme-matrix { --bg-color: #000000; --primary-color: #00ff41; --secondary-color: #0d1117; }
        body.theme-matrix .typing-text span.correct { color: #00ff41; text-shadow: 0 0 5px #00ff41; }
        
        body.theme-cyber { --bg-color: #2b213a; --primary-color: #ff00ff; --secondary-color: #241b31; }
        body.theme-cyber .typing-text span.correct { color: #00ffff; }

        body.theme-ocean { --bg-color: #0f172a; --primary-color: #38bdf8; --secondary-color: #1e293b; }
        
        .glass { background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(10px); }
    </style>
</head>
<body class="flex flex-col min-h-screen selection:bg-orange-500 selection:text-white" id="appBody">

    <!-- Navigation -->
    <nav class="bg-slate-900 border-b border-slate-800 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="p-2 rounded-lg" style="background-color: var(--primary-color); color: white;">
                        <i class="fa-solid fa-keyboard"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-white">TypeMaster <span class="text-xs bg-gray-700 px-2 py-0.5 rounded text-gray-300 ml-1">PRO</span></span>
                </div>
                <div class="flex items-center gap-6 text-sm font-medium text-slate-400">
                    <a href="index.html" class="hover:text-white transition">Home</a>
                    <a href="contact.html" class="hover:text-white transition">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-5xl mx-auto px-4 py-12 sm:px-6 w-full flex flex-col items-center">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold mb-2" style="color: var(--primary-color);">Typing Speed Test</h1>
            <p class="text-slate-400 text-sm">Test your WPM with mechanical keyboard sounds and custom themes.</p>
        </div>

        <!-- Tool Container -->
        <div class="w-full max-w-4xl rounded-2xl border border-slate-700 overflow-hidden shadow-2xl p-6 md:p-8 relative" style="background-color: var(--secondary-color);">
            
            <!-- Settings Bar -->
            <div class="flex flex-wrap justify-between items-center mb-8 gap-4 border-b border-slate-700 pb-4">
                
                <div class="flex flex-wrap gap-4 items-center">
                    <!-- Mode -->
                    <div class="flex gap-1 bg-black/20 p-1 rounded-lg border border-slate-700">
                        <button class="mode-btn px-3 py-1 text-xs font-bold rounded text-white transition" style="background-color: var(--primary-color);" onclick="setMode('easy', this)">Easy</button>
                        <button class="mode-btn px-3 py-1 text-xs font-bold rounded text-slate-400 hover:text-white transition" onclick="setMode('medium', this)">Medium</button>
                        <button class="mode-btn px-3 py-1 text-xs font-bold rounded text-slate-400 hover:text-white transition" onclick="setMode('hard', this)">Hard</button>
                    </div>
                    
                    <!-- Timer -->
                    <div class="flex gap-1 bg-black/20 p-1 rounded-lg border border-slate-700">
                        <button class="time-btn px-3 py-1 text-xs font-bold rounded text-slate-400 hover:text-white transition" onclick="setTime(30, this)">30s</button>
                        <button class="time-btn px-3 py-1 text-xs font-bold rounded text-white transition" style="background-color: var(--primary-color);" onclick="setTime(60, this)">60s</button>
                        <button class="time-btn px-3 py-1 text-xs font-bold rounded text-slate-400 hover:text-white transition" onclick="setTime(120, this)">2m</button>
                    </div>

                    <!-- Theme Selector (NEW) -->
                    <select id="themeSelect" onchange="changeTheme(this.value)" class="bg-black/20 text-xs font-bold text-slate-300 rounded-lg border border-slate-700 p-1.5 focus:outline-none focus:border-[var(--primary-color)]">
                        <option value="default">üçä Default</option>
                        <option value="matrix">üíª Matrix</option>
                        <option value="cyber">üîÆ Cyber</option>
                        <option value="ocean">üåä Ocean</option>
                    </select>

                    <button onclick="openCustomTextModal()" class="text-xs font-bold text-cyan-400 hover:text-cyan-300 border border-cyan-800 bg-cyan-900/30 px-3 py-1.5 rounded transition">
                        Custom
                    </button>
                </div>

                <div class="flex items-center gap-4">
                    <!-- High Score (NEW) -->
                    <div class="text-xs text-slate-400 font-bold bg-black/20 px-3 py-1.5 rounded-lg border border-slate-700">
                        Best: <span id="highScore" style="color: var(--primary-color);">0</span> WPM
                    </div>

                    <!-- Sound Toggle -->
                    <button id="soundBtn" class="hover:text-white transition p-2" style="color: var(--primary-color);" onclick="toggleSound()" title="Toggle Sound">
                        <i class="fa-solid fa-volume-high text-lg"></i>
                    </button>
                </div>
            </div>

            <!-- Typing Area -->
            <div class="relative min-h-[200px] mb-6" onclick="focusInput()">
                <input type="text" class="input-field" id="inputField" autocomplete="off">
                
                <!-- Text Display -->
                <div class="typing-text text-xl sm:text-2xl leading-relaxed font-mono cursor-text select-none h-64 overflow-hidden relative bg-black/20 rounded-xl p-8 border border-slate-700" id="typingArea">
                    <div id="wordsContainer" class="absolute top-0 left-0 right-0 p-8 transition-transform duration-200">
                        <div id="cursor"></div>
                    </div>
                </div>

                <!-- Focus Overlay -->
                <div id="focusOverlay" class="absolute inset-0 flex items-center justify-center bg-slate-900/80 backdrop-blur-[1px] rounded-xl cursor-pointer transition-opacity z-20">
                    <div class="text-center animate-bounce">
                        <i class="fa-solid fa-arrow-pointer text-3xl mb-2" style="color: var(--primary-color);"></i>
                        <p class="text-white font-bold">Click to Start</p>
                    </div>
                </div>
            </div>

            <!-- Live Stats Row -->
            <div class="flex justify-between px-4 py-3 bg-black/20 rounded-xl border border-slate-700">
                <div class="text-center">
                    <div class="text-[10px] uppercase text-slate-500 font-bold">Time</div>
                    <div class="text-2xl font-mono font-bold text-white" id="timeLeft">60</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] uppercase text-slate-500 font-bold">WPM</div>
                    <div class="text-2xl font-mono font-bold" style="color: var(--primary-color);" id="wpmTag">0</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] uppercase text-slate-500 font-bold">CPM</div>
                    <div class="text-2xl font-mono font-bold text-blue-400" id="cpmTag">0</div>
                </div>
                <div class="text-center">
                    <div class="text-[10px] uppercase text-slate-500 font-bold">Accuracy</div>
                    <div class="text-2xl font-mono font-bold text-green-400" id="accTag">100%</div>
                </div>
            </div>

            <!-- Restart Button -->
            <div class="text-center mt-6">
                <button onclick="resetGame()" class="px-8 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-full text-sm font-bold transition flex items-center gap-2 mx-auto border border-slate-600 hover:border-[var(--primary-color)] group">
                    <i class="fa-solid fa-rotate-right group-hover:rotate-180 transition duration-500"></i> Restart Test
                </button>
            </div>

            <!-- Result Modal -->
            <div id="resultModal" class="absolute inset-0 bg-slate-900/95 z-50 flex items-center justify-center hidden fade-in backdrop-blur-md">
                <div class="glass p-8 rounded-2xl border border-slate-700 shadow-2xl text-center max-w-sm w-full mx-4" style="border-color: var(--primary-color);">
                    <div class="w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg pulse-stat" style="background-color: var(--primary-color);">
                        <i class="fa-solid fa-trophy text-3xl text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-white mb-1">Result</h2>
                    
                    <div class="grid grid-cols-2 gap-4 mb-8 mt-6">
                        <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                            <div class="text-4xl font-bold text-white" id="resWpm">0</div>
                            <div class="text-xs text-slate-500 uppercase font-bold mt-1">WPM</div>
                        </div>
                        <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                            <div class="text-4xl font-bold text-green-400" id="resAcc">0%</div>
                            <div class="text-xs text-slate-500 uppercase font-bold mt-1">Accuracy</div>
                        </div>
                        <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                            <div class="text-xl font-bold text-blue-400" id="resCpm">0</div>
                            <div class="text-xs text-slate-500 uppercase font-bold mt-1">CPM</div>
                        </div>
                        <div class="bg-slate-800 p-4 rounded-xl border border-slate-700">
                            <div class="text-xl font-bold text-red-400" id="resMistakes">0</div>
                            <div class="text-xs text-slate-500 uppercase font-bold mt-1">Errors</div>
                        </div>
                    </div>
                    
                    <button onclick="resetGame()" class="w-full text-white font-bold py-3 rounded-xl transition shadow-lg hover:opacity-90" style="background-color: var(--primary-color);">
                        Test Again
                    </button>
                </div>
            </div>

            <!-- Custom Text Modal -->
            <div id="customTextModal" class="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center hidden">
                <div class="bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700">
                    <h3 class="text-xl font-bold text-white mb-4">Paste Your Text</h3>
                    <textarea id="customTextInput" class="w-full h-40 bg-slate-900 border border-slate-600 rounded-lg p-3 text-slate-300 text-sm focus:outline-none focus:border-[var(--primary-color)] resize-none" placeholder="Paste article or paragraph here..."></textarea>
                    <div class="flex justify-end gap-3 mt-4">
                        <button onclick="closeCustomTextModal()" class="px-4 py-2 text-slate-400 hover:text-white">Cancel</button>
                        <button onclick="applyCustomText()" class="px-6 py-2 text-white rounded-lg font-bold hover:opacity-90" style="background-color: var(--primary-color);">Start</button>
                    </div>
                </div>
            </div>

        </div>

    </main>

    <footer class="bg-slate-900 border-t border-slate-800 mt-auto">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-slate-500">
                &copy; 2023 Free Online Tools. <a href="../privacy.html" style="color: var(--primary-color);">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <!-- Audio Elements -->
    <audio id="soundClick" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
    <audio id="soundError" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>

    <script>
        (function() {
            // Data
            const dataSets = {
                easy: [
                    "the be to of and a in that have I it for not on with he as you do at this but his by from they we say her she or an will my one all would there their what so up out if about who get which go me when make can like time no just him know take people into year your good some could them see other than then now look only come its over think also back after use two how our work first well way even new want because any these give day most us",
                    "time person year way day thing man world life hand part child eye woman place work week case point government company number group problem fact"
                ],
                medium: [
                    "The quick brown fox jumps over the lazy dog. Technology is best when it brings people together. It is the campfire around which we tell our stories.",
                    "Success is not final, failure is not fatal: it is the courage to continue that counts. In the middle of difficulty lies opportunity.",
                    "Happiness is not something ready made. It comes from your own actions. Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.",
                    "The only way to do great work is to love what you do. If you haven't found it yet, keep looking. Don't settle."
                ],
                hard: [
                    "function binarySearch(arr, x) { let l = 0, r = arr.length - 1; while (l <= r) { let m = l + Math.floor((r - l) / 2); if (arr[m] == x) return m; if (arr[m] < x) l = m + 1; else r = m - 1; } return -1; }",
                    "const PI = 3.14159; let radius = 10; let area = PI * radius * radius; console.log(`Area: ${area}`); // Calculate area of circle",
                    "A quantum computer exploits quantum mechanical phenomena such as superposition and entanglement to perform computation. Computers that perform quantum computations are known as quantum computers."
                ]
            };

            const wordsContainer = document.getElementById("wordsContainer");
            const inputField = document.getElementById("inputField");
            const timeTag = document.getElementById("timeLeft");
            const wpmTag = document.getElementById("wpmTag");
            const cpmTag = document.getElementById("cpmTag");
            const accTag = document.getElementById("accTag");
            const highScoreEl = document.getElementById("highScore");
            const focusOverlay = document.getElementById("focusOverlay");
            const resultModal = document.getElementById("resultModal");
            const soundBtn = document.getElementById("soundBtn");
            const clickSound = document.getElementById("soundClick");
            const errorSound = document.getElementById("soundError");
            const cursor = document.getElementById("cursor");
            const customTextModal = document.getElementById("customTextModal");
            const customTextInput = document.getElementById("customTextInput");
            const appBody = document.getElementById("appBody");
            const typingArea = document.getElementById("typingArea");

            let timer,
            maxTime = 60,
            timeLeft = maxTime,
            charIndex = 0,
            mistakes = 0,
            isTyping = false,
            isSoundOn = true,
            currentMode = 'medium',
            customText = "";

            // Adjust volume
            clickSound.volume = 0.4;
            errorSound.volume = 0.3;

            // Load High Score
            const savedScore = localStorage.getItem('typing_high_score') || 0;
            highScoreEl.innerText = savedScore;

            window.changeTheme = function(theme) {
                appBody.className = `flex flex-col min-h-screen selection:bg-orange-500 selection:text-white theme-${theme}`;
            }

            window.toggleSound = function() {
                isSoundOn = !isSoundOn;
                soundBtn.innerHTML = isSoundOn ? '<i class="fa-solid fa-volume-high text-lg"></i>' : '<i class="fa-solid fa-volume-xmark text-lg"></i>';
                soundBtn.style.color = isSoundOn ? 'var(--primary-color)' : '#64748b';
            }

            window.setMode = function(mode, btn) {
                currentMode = mode;
                document.querySelectorAll('.mode-btn').forEach(b => {
                    b.style.backgroundColor = 'transparent';
                    b.style.color = '#94a3b8';
                });
                btn.style.backgroundColor = 'var(--primary-color)';
                btn.style.color = 'white';
                resetGame();
            }

            window.setTime = function(seconds, btn) {
                maxTime = seconds;
                document.querySelectorAll('.time-btn').forEach(b => {
                    b.style.backgroundColor = 'transparent';
                    b.style.color = '#94a3b8';
                });
                btn.style.backgroundColor = 'var(--primary-color)';
                btn.style.color = 'white';
                resetGame();
            }

            window.openCustomTextModal = function() {
                customTextModal.classList.remove('hidden');
                customTextInput.focus();
            }

            window.closeCustomTextModal = function() {
                customTextModal.classList.add('hidden');
            }

            window.applyCustomText = function() {
                const text = customTextInput.value.trim();
                if(text.length > 10) {
                    customText = text;
                    currentMode = 'custom';
                    
                    document.querySelectorAll('.mode-btn').forEach(b => {
                        b.style.backgroundColor = 'transparent';
                        b.style.color = '#94a3b8';
                    });
                    
                    closeCustomTextModal();
                    resetGame();
                } else {
                    alert("Please enter at least 10 characters.");
                }
            }

            function loadParagraph() {
                let text = "";
                if(currentMode === 'custom' && customText) {
                    text = customText;
                } else {
                    const source = dataSets[currentMode];
                    const randIndex = Math.floor(Math.random() * source.length);
                    text = source[randIndex];
                    
                    if(currentMode === 'easy') {
                        const words = text.split(" ");
                        text = "";
                        for(let i=0; i<50; i++) {
                            text += words[Math.floor(Math.random() * words.length)] + " ";
                        }
                    }
                }

                wordsContainer.innerHTML = "";
                // Append cursor first to ensure it's in DOM
                wordsContainer.appendChild(cursor);
                cursor.style.display = "block";
                
                text.split("").forEach(char => {
                    let span = document.createElement("span");
                    span.innerText = char;
                    wordsContainer.appendChild(span);
                });
                
                updateCursorPosition(0);
            }
            
            function updateCursorPosition(index) {
                const spans = wordsContainer.querySelectorAll("span");
                if (index < spans.length) {
                    const span = spans[index];
                    cursor.style.left = span.offsetLeft + "px";
                    cursor.style.top = (span.offsetTop + 4) + "px";
                } else if (spans.length > 0) {
                    // End of text
                    const last = spans[spans.length - 1];
                    cursor.style.left = (last.offsetLeft + last.offsetWidth) + "px";
                    cursor.style.top = (last.offsetTop + 4) + "px";
                }
            }

            function initTyping() {
                const characters = wordsContainer.querySelectorAll("span");
                let typedChar = inputField.value.split("")[charIndex];

                if(charIndex < characters.length && timeLeft > 0) {
                    if(!isTyping) {
                        timer = setInterval(initTimer, 1000);
                        isTyping = true;
                        focusOverlay.classList.add("hidden");
                        document.body.classList.add("typing-active");
                    }
                    
                    if(typedChar == null) { // Backspace
                        if(charIndex > 0) {
                            charIndex--;
                            if(characters[charIndex].classList.contains("incorrect")) {
                                mistakes--;
                            }
                            characters[charIndex].classList.remove("correct", "incorrect");
                        }
                    } else {
                        if(characters[charIndex].innerText === typedChar) {
                            characters[charIndex].classList.add("correct");
                            if(isSoundOn) {
                                clickSound.currentTime = 0;
                                clickSound.play().catch(()=>{});
                            }
                        } else {
                            mistakes++;
                            characters[charIndex].classList.add("incorrect");
                            if(isSoundOn) {
                                errorSound.currentTime = 0;
                                errorSound.play().catch(()=>{});
                            }
                        }
                        charIndex++;
                    }
                    
                    updateCursorPosition(charIndex);

                    // Stats
                    const timeSpent = maxTime - timeLeft;
                    const safeTime = timeSpent === 0 ? 1 : timeSpent;
                    
                    let wpm = Math.round(((charIndex - mistakes) / 5) / (safeTime / 60));
                    wpm = wpm < 0 || !wpm || wpm === Infinity ? 0 : wpm;
                    
                    let cpm = Math.round((charIndex - mistakes) / (safeTime / 60));
                    cpm = cpm < 0 || !cpm || cpm === Infinity ? 0 : cpm;

                    let accuracy = Math.round(((charIndex - mistakes) / charIndex) * 100);
                    accuracy = accuracy < 0 || !accuracy || accuracy === Infinity ? 100 : accuracy;

                    wpmTag.innerText = wpm;
                    cpmTag.innerText = cpm;
                    accTag.innerText = accuracy + "%";
                    
                    // FIXED AUTO SCROLL
                    // We check if the active char's relative position is too low
                    const spans = wordsContainer.querySelectorAll("span");
                    if (charIndex < spans.length) {
                        const activeSpan = spans[charIndex];
                        // Calculate position relative to container's current transform
                        const containerTop = Math.abs(parseInt(wordsContainer.style.top || 0));
                        const charTop = activeSpan.offsetTop;
                        
                        // If character is below visible area (approx 100px threshold relative to current view)
                        if (charTop - containerTop > 100) {
                            // Shift up by approx one line height (36px)
                            wordsContainer.style.top = `-${containerTop + 36}px`;
                        }
                    }

                } else {
                    clearInterval(timer);
                    inputField.value = "";
                    showResult();
                }
            }

            function initTimer() {
                if(timeLeft > 0) {
                    timeLeft--;
                    timeTag.innerText = timeLeft + "s";
                } else {
                    clearInterval(timer);
                    showResult();
                }
            }
            
            function showResult() {
                resultModal.classList.remove("hidden");
                document.body.classList.remove("typing-active");
                
                const timeSpent = maxTime - timeLeft;
                const safeTime = timeSpent === 0 ? 1 : timeSpent;

                let wpm = Math.round(((charIndex - mistakes) / 5) / (safeTime / 60));
                if (isNaN(wpm) || wpm === Infinity) wpm = 0;
                
                let cpm = Math.round((charIndex - mistakes) / (safeTime / 60));
                if (isNaN(cpm) || cpm === Infinity) cpm = 0;

                let accuracy = Math.round(((charIndex - mistakes) / charIndex) * 100);
                if (isNaN(accuracy)) accuracy = 0;
                
                document.getElementById("resWpm").innerText = wpm;
                document.getElementById("resAcc").innerText = accuracy + "%";
                document.getElementById("resCpm").innerText = cpm;
                document.getElementById("resMistakes").innerText = mistakes;
                
                const currentBest = parseInt(localStorage.getItem('typing_high_score') || 0);
                if(wpm > currentBest) {
                    localStorage.setItem('typing_high_score', wpm);
                    highScoreEl.innerText = wpm;
                }
            }

            window.resetGame = function() {
                loadParagraph();
                clearInterval(timer);
                timeLeft = maxTime;
                charIndex = mistakes = 0;
                isTyping = false;
                inputField.value = "";
                timeTag.innerText = timeLeft + "s";
                wpmTag.innerText = 0;
                cpmTag.innerText = 0;
                accTag.innerText = "100%";
                resultModal.classList.add("hidden");
                focusOverlay.classList.remove("hidden");
                document.body.classList.remove("typing-active");
                
                wordsContainer.style.top = "0px";
                updateCursorPosition(0);
                
                inputField.focus();
            }

            window.focusInput = function() {
                inputField.focus();
                focusOverlay.classList.add("hidden");
            }

            inputField.addEventListener("input", initTyping);
            
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    resetGame();
                }
                if(resultModal.classList.contains('hidden') && customTextModal.classList.contains('hidden')) {
                     inputField.focus();
                }
            });

            loadParagraph();
        })();
    </script>
</body>
</html>