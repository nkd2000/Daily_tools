<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pro Typing Master | Speed Test Game</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="Test your typing speed (WPM) with sound effects. Professional typing practice game with difficulty levels, themes, high score tracking, and certificates.">
    <meta name="keywords"
        content="typing speed test, wpm test, typing game, mechanical keyboard sound, typing master online, touch typing, coding typing test">
    <meta name="author" content="Free Online Tools">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Chart.js for Graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Roboto+Mono:wght@400;500&family=Tiro+Devanagari+Hindi&family=Cinzel:wght@700&display=swap"
        rel="stylesheet">

    <style>
        /* Base Variables for Themes */
        :root {
            --bg-color: #0f172a;
            --text-color: #f8fafc;
            --primary-color: #fb923c;
            /* Orange */
            --secondary-color: #1e293b;
            --panel-bg: #1e293b;
            --border-color: #334155;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.3s, color 0.3s;
            height: 100vh;
            overflow: hidden;
            /* No Body Scroll on Desktop */
        }

        .font-mono {
            font-family: 'Roboto Mono', monospace;
        }

        .font-hindi {
            font-family: 'Tiro Devanagari Hindi', serif;
        }

        .fade-in {
            animation: fadeIn 0.4s ease-out forwards;
            opacity: 0;
            transform: translateY(10px);
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Typing Area Styles */
        .typing-text {
            position: relative;
        }

        .typing-text span {
            position: relative;
            margin-right: 0px;
            color: #64748b;
            transition: color 0.1s;
        }

        .font-mono .typing-text span {
            margin-right: 1px;
        }

        .typing-text span.correct {
            color: #e2e8f0;
        }

        .typing-text span.incorrect {
            color: #ef4444;
            text-decoration: underline;
            text-decoration-color: #ef4444;
        }

        /* Smooth Caret Animation */
        #cursor {
            position: absolute;
            width: 3px;
            height: 1.4em;
            background-color: var(--primary-color);
            transition: left 0.08s ease-out, top 0.1s ease-out;
            z-index: 10;
            border-radius: 2px;
            animation: blink 1s infinite;
            display: none;
        }

        .typing-active #cursor {
            animation: none;
            opacity: 1;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* Input hidden but accessible - Fixed for Mobile Jump */
        .input-field {
            position: fixed;
            z-index: -999;
            opacity: 0;
            top: 50%;
            left: 50%;
            height: 1px;
            width: 1px;
            pointer-events: none;
        }

        /* Theme Classes */
        body.theme-matrix {
            --bg-color: #000000;
            --primary-color: #00ff41;
            --secondary-color: #0d1117;
            --panel-bg: #0d1117;
            --border-color: #30363d;
        }

        body.theme-matrix .typing-text span.correct {
            color: #00ff41;
            text-shadow: 0 0 5px #00ff41;
        }

        body.theme-cyber {
            --bg-color: #2b213a;
            --primary-color: #ff00ff;
            --secondary-color: #241b31;
            --panel-bg: #241b31;
            --border-color: #4c1d95;
        }

        body.theme-cyber .typing-text span.correct {
            color: #00ffff;
        }

        body.theme-ocean {
            --bg-color: #0f172a;
            --primary-color: #38bdf8;
            --secondary-color: #1e293b;
            --panel-bg: #1e293b;
            --border-color: #334155;
        }

        .glass {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
        }

        /* Sudden Death Shake */
        .shake {
            animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: #334155;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #475569;
        }

        /* Responsive Scroll for Mobile */
        @media (max-width: 1024px) {
            body {
                overflow-y: auto;
                height: auto;
                min-height: 100vh;
            }

            main {
                padding-bottom: 100px;
            }
        }
    </style>
</head>

<body class="flex flex-col h-screen selection:bg-orange-500 selection:text-white" id="appBody">

    <!-- Navigation -->
    <nav class="bg-slate-900 border-b border-slate-800 flex-none z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-14">
                <div class="flex items-center gap-3">
                    <div class="p-1.5 rounded-lg" style="background-color: var(--primary-color); color: white;">
                        <i class="fa-solid fa-keyboard"></i>
                    </div>
                    <span class="font-bold text-lg tracking-tight text-white">TypeMaster <span
                            class="text-[10px] bg-gray-700 px-1.5 py-0.5 rounded text-gray-300 ml-1 align-top">PRO</span></span>
                </div>
                <div class="flex items-center gap-6 text-sm font-medium text-slate-400">
                    <a href="../../index.html" class="hover:text-white transition">Home</a>
                    <a href="../../pages/contact.html" class="hover:text-white transition">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow flex items-center justify-center w-full px-4 py-6 overflow-hidden">

        <div class="w-full max-w-6xl grid grid-cols-1 lg:grid-cols-12 gap-6 h-full max-h-[600px]">

            <!-- Left: Game Area -->
            <div class="lg:col-span-8 flex flex-col gap-4">

                <!-- Tool Container -->
                <div class="flex-grow rounded-2xl border overflow-hidden shadow-2xl p-5 relative flex flex-col"
                    style="background-color: var(--secondary-color); border-color: var(--border-color);"
                    id="gameContainer">

                    <!-- Settings Bar -->
                    <div class="flex flex-wrap justify-between items-center mb-4 gap-3 border-b pb-3"
                        style="border-color: var(--border-color);">
                        <div class="flex flex-wrap gap-2 items-center">
                            <div class="flex gap-1 bg-black/20 p-1 rounded-lg">
                                <button class="lang-btn px-2.5 py-0.5 text-xs font-bold rounded text-white transition"
                                    style="background-color: var(--primary-color);"
                                    onclick="setLang('en', this)">EN</button>
                                <button
                                    class="lang-btn px-2.5 py-0.5 text-xs font-bold rounded text-slate-400 hover:text-white transition"
                                    onclick="setLang('hi', this)">HI</button>
                            </div>
                            <div class="flex gap-1 bg-black/20 p-1 rounded-lg">
                                <button class="mode-btn px-2.5 py-0.5 text-xs font-bold rounded text-white transition"
                                    style="background-color: var(--primary-color);"
                                    onclick="setMode('easy', this)">Easy</button>
                                <button
                                    class="mode-btn px-2.5 py-0.5 text-xs font-bold rounded text-slate-400 hover:text-white transition"
                                    onclick="setMode('medium', this)">Medium</button>
                                <button
                                    class="mode-btn px-2.5 py-0.5 text-xs font-bold rounded text-slate-400 hover:text-white transition"
                                    onclick="setMode('hard', this)">Hard</button>
                                <button
                                    class="mode-btn px-2.5 py-0.5 text-xs font-bold rounded text-red-400 hover:text-red-300 transition border border-red-900/30 hover:bg-red-900/20"
                                    onclick="setMode('suddenDeath', this)" title="1 Mistake = Game Over">üíÄ</button>
                            </div>
                            <div class="flex gap-1 bg-black/20 p-1 rounded-lg">
                                <button
                                    class="time-btn px-2.5 py-0.5 text-xs font-bold rounded text-slate-400 hover:text-white transition"
                                    onclick="setTime(30, this)">30s</button>
                                <button class="time-btn px-2.5 py-0.5 text-xs font-bold rounded text-white transition"
                                    style="background-color: var(--primary-color);"
                                    onclick="setTime(60, this)">60s</button>
                                <button
                                    class="time-btn px-2.5 py-0.5 text-xs font-bold rounded text-slate-400 hover:text-white transition"
                                    onclick="setTime(120, this)">2m</button>
                            </div>
                        </div>

                        <div class="flex items-center gap-3">
                            <button onclick="openCustomTextModal()"
                                class="text-[10px] font-bold text-cyan-400 hover:text-cyan-300 border border-cyan-800 bg-cyan-900/30 px-2 py-1 rounded transition">Custom</button>
                            <button id="soundBtn" class="hover:text-white transition p-1"
                                style="color: var(--primary-color);" onclick="toggleSound()" title="Toggle Sound">
                                <i class="fa-solid fa-volume-high text-sm"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Typing Area -->
                    <div class="relative flex-grow mb-4" onclick="focusInput()">
                        <input type="text" class="input-field" id="inputField" autocomplete="off" autocorrect="off"
                            autocapitalize="off" spellcheck="false">

                        <div class="typing-text text-xl leading-relaxed font-mono cursor-text select-none h-full overflow-hidden relative bg-black/20 rounded-xl p-6 border"
                            style="border-color: var(--border-color);" id="typingArea">
                            <div id="wordsContainer"
                                class="absolute top-0 left-0 right-0 p-6 transition-transform duration-200">
                                <div id="cursor"></div>
                            </div>
                        </div>

                        <div id="focusOverlay"
                            class="absolute inset-0 flex items-center justify-center bg-slate-900/80 backdrop-blur-[1px] rounded-xl cursor-pointer transition-opacity z-20">
                            <div class="text-center animate-bounce">
                                <i class="fa-solid fa-arrow-pointer text-2xl mb-2"
                                    style="color: var(--primary-color);"></i>
                                <p class="text-white font-bold text-sm">Click to Start</p>
                            </div>
                        </div>
                    </div>

                    <!-- Live Stats Row -->
                    <div class="flex justify-between px-4 py-2 bg-black/20 rounded-xl border items-center"
                        style="border-color: var(--border-color);">
                        <div class="flex items-center gap-4">
                            <div class="text-center">
                                <div class="text-[10px] uppercase text-slate-500 font-bold">Time</div>
                                <div class="text-xl font-mono font-bold text-white" id="timeLeft">60</div>
                            </div>
                            <div class="h-6 w-px bg-slate-700"></div>
                            <div class="text-center">
                                <div class="text-[10px] uppercase text-slate-500 font-bold">Best</div>
                                <div class="text-xl font-mono font-bold text-slate-400" id="highScore">0</div>
                            </div>
                        </div>

                        <div class="flex items-center gap-6">
                            <div class="text-center">
                                <div class="text-[10px] uppercase text-slate-500 font-bold">WPM</div>
                                <div class="text-2xl font-mono font-bold" style="color: var(--primary-color);"
                                    id="wpmTag">0</div>
                            </div>
                            <div class="text-center hidden sm:block">
                                <div class="text-[10px] uppercase text-slate-500 font-bold">CPM</div>
                                <div class="text-xl font-mono font-bold text-blue-400" id="cpmTag">0</div>
                            </div>
                            <div class="text-center">
                                <div class="text-[10px] uppercase text-slate-500 font-bold">Acc</div>
                                <div class="text-xl font-mono font-bold text-green-400" id="accTag">100%</div>
                            </div>
                        </div>

                        <button onclick="resetGame()"
                            class="ml-2 p-2 bg-slate-700/50 hover:bg-slate-600 text-white rounded-lg transition border border-slate-600 hover:border-[var(--primary-color)]"
                            title="Restart"><i class="fa-solid fa-rotate-right"></i></button>
                    </div>

                    <!-- Result Modal -->
                    <div id="resultModal"
                        class="absolute inset-0 bg-slate-900/95 z-50 flex items-center justify-center hidden fade-in backdrop-blur-md">
                        <div class="glass p-6 rounded-2xl border shadow-2xl text-center max-w-lg w-full mx-4"
                            style="border-color: var(--primary-color);">
                            <div class="w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-4 shadow-lg pulse-stat"
                                style="background-color: var(--primary-color);">
                                <i class="fa-solid fa-trophy text-2xl text-white"></i>
                            </div>
                            <h2 class="text-xl font-bold text-white mb-1" id="resultTitle">Result</h2>

                            <div class="grid grid-cols-4 gap-2 mb-4 mt-4">
                                <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                    <div class="text-2xl font-bold text-white" id="resWpm">0</div>
                                    <div class="text-[10px] text-slate-500 uppercase font-bold">Net WPM</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                    <div class="text-2xl font-bold text-yellow-400" id="resGrossWpm">0</div>
                                    <div class="text-[10px] text-slate-500 uppercase font-bold">Gross</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                    <div class="text-2xl font-bold text-green-400" id="resAcc">0%</div>
                                    <div class="text-[10px] text-slate-500 uppercase font-bold">Acc</div>
                                </div>
                                <div class="bg-slate-800 p-2 rounded-lg border border-slate-700">
                                    <div class="text-xl font-bold text-red-400" id="resMistakes">0</div>
                                    <div class="text-[10px] text-slate-500 uppercase font-bold">Err</div>
                                </div>
                            </div>

                            <div class="mb-4 h-24 w-full">
                                <canvas id="wpmChart"></canvas>
                            </div>

                            <div class="flex gap-2">
                                <button onclick="downloadCertificate()"
                                    class="flex-1 bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 rounded-lg transition shadow-lg flex items-center justify-center gap-2 text-sm">
                                    <i class="fa-solid fa-certificate"></i> Cert
                                </button>
                                <button onclick="resetGame()"
                                    class="flex-1 text-white font-bold py-2 rounded-lg transition shadow-lg hover:opacity-90 text-sm"
                                    style="background-color: var(--primary-color);">
                                    Retry
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right: Sidebar (History & Theme) -->
            <div class="lg:col-span-4 flex flex-col gap-4 h-full">

                <!-- Theme Card -->
                <div class="rounded-xl border p-4"
                    style="background-color: var(--panel-bg); border-color: var(--border-color);">
                    <h3 class="text-xs font-bold text-slate-400 uppercase mb-3 flex justify-between items-center">Theme
                        <i class="fa-solid fa-palette"></i></h3>
                    <div class="grid grid-cols-2 gap-2">
                        <button onclick="changeTheme('default')"
                            class="text-xs p-2 rounded border border-slate-600 hover:border-orange-500 text-left flex items-center gap-2 transition bg-[#0f172a] text-white">üçä
                            Default</button>
                        <button onclick="changeTheme('matrix')"
                            class="text-xs p-2 rounded border border-slate-600 hover:border-green-500 text-left flex items-center gap-2 transition bg-black text-[#00ff41]">üíª
                            Matrix</button>
                        <button onclick="changeTheme('cyber')"
                            class="text-xs p-2 rounded border border-slate-600 hover:border-pink-500 text-left flex items-center gap-2 transition bg-[#2b213a] text-white">üîÆ
                            Cyber</button>
                        <button onclick="changeTheme('ocean')"
                            class="text-xs p-2 rounded border border-slate-600 hover:border-cyan-500 text-left flex items-center gap-2 transition bg-[#0f172a] text-sky-300">üåä
                            Ocean</button>
                    </div>
                </div>

                <!-- History Card -->
                <div class="flex-grow rounded-xl border overflow-hidden flex flex-col"
                    style="background-color: var(--panel-bg); border-color: var(--border-color);">
                    <div class="p-3 border-b flex justify-between items-center"
                        style="border-color: var(--border-color);">
                        <h3 class="text-xs font-bold text-slate-400 uppercase">Recent History</h3>
                        <button onclick="clearHistory()"
                            class="text-[10px] text-red-400 hover:text-red-300">Clear</button>
                    </div>
                    <div class="flex-grow overflow-y-auto p-0 scrollbar-hide">
                        <table class="w-full text-left text-xs text-slate-400">
                            <thead class="bg-black/20 text-slate-500">
                                <tr>
                                    <th class="px-3 py-2">WPM</th>
                                    <th class="px-3 py-2">Acc</th>
                                    <th class="px-3 py-2 text-right">Date</th>
                                    <th class="px-3 py-2 text-right hidden sm:table-cell">Mode</th>
                                </tr>
                            </thead>
                            <tbody id="historyBody" class="divide-y divide-slate-700/50">
                                <tr>
                                    <td colspan="4" class="px-3 py-4 text-center italic opacity-50">No tests yet</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>
        </div>

        <!-- Custom Text Modal -->
        <div id="customTextModal" class="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center hidden">
            <div class="bg-slate-800 p-6 rounded-2xl w-full max-w-lg border border-slate-700">
                <h3 class="text-lg font-bold text-white mb-3">Paste Text</h3>
                <textarea id="customTextInput"
                    class="w-full h-32 bg-slate-900 border border-slate-600 rounded-lg p-3 text-slate-300 text-sm focus:outline-none focus:border-[var(--primary-color)] resize-none"
                    placeholder="Paste article here..."></textarea>
                <div class="flex justify-end gap-3 mt-4">
                    <button onclick="closeCustomTextModal()"
                        class="px-4 py-2 text-slate-400 hover:text-white text-sm">Cancel</button>
                    <button onclick="applyCustomText()"
                        class="px-6 py-2 text-white rounded-lg font-bold hover:opacity-90 text-sm"
                        style="background-color: var(--primary-color);">Start</button>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-900 border-t border-slate-800 mt-auto flex-none">
        <div class="max-w-7xl mx-auto py-4 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-xs text-slate-500">
                &copy; 2023 Free Online Tools. <a href="../../pages/privacy.html" style="color: var(--primary-color);">Privacy
                    Policy</a>
            </p>
        </div>
    </footer>

    <!-- Audio Elements -->
    <audio id="soundClick" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
    <audio id="soundError" src="https://assets.mixkit.co/active_storage/sfx/2572/2572-preview.mp3"></audio>
    <audio id="soundFail" src="https://assets.mixkit.co/active_storage/sfx/2573/2573-preview.mp3"></audio>

    <script>
        (function () {
            // Data
            // const dataSets = {
            //     en: {
            //         easy: [
            //             "the be to of and a in that have I it for not on with he as you do at this but his by from they we say her she or an will my one all would there their what so up out if about who get which go me when make can like time no just him know take people into year your good some could them see other than then now look only come its over think also back after use two how our work first well way even new want because any these give day most us",
            //             "time person year way day thing man world life hand part child eye woman place work week case point government company number group problem fact"
            //         ],
            //         medium: [
            //             "The quick brown fox jumps over the lazy dog. Technology is best when it brings people together. It is the campfire around which we tell our stories.",
            //             "Success is not final, failure is not fatal: it is the courage to continue that counts. In the middle of difficulty lies opportunity.",
            //             "Happiness is not something ready made. It comes from your own actions. Do not dwell in the past, do not dream of the future, concentrate the mind on the present moment.",
            //             "The only way to do great work is to love what you do. If you haven't found it yet, keep looking. Don't settle.",
            //             "It is during our darkest moments that we must focus to see the light. Aristotle reminds us that hope is a waking dream."
            //         ],
            //         hard: [
            //             "function binarySearch(arr, x) { let l = 0, r = arr.length - 1; while (l <= r) { let m = l + Math.floor((r - l) / 2); if (arr[m] == x) return m; if (arr[m] < x) l = m + 1; else r = m - 1; } return -1; }",
            //             "const PI = 3.14159; let radius = 10; let area = PI * radius * radius; console.log(`Area: ${area}`); // Calculate area of circle",
            //             "A quantum computer exploits quantum mechanical phenomena such as superposition and entanglement to perform computation. Computers that perform quantum computations are known as quantum computers."
            //         ]
            //     },
            //     hi: {
            //         easy: [
            //             "‡§≠‡§æ‡§∞‡§§ ‡§è‡§ï ‡§µ‡§ø‡§∂‡§æ‡§≤ ‡§¶‡•á‡§∂ ‡§π‡•à ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§®‡•á‡§ï ‡§≠‡§æ‡§∑‡§æ‡§è‡§Ç ‡§¨‡•ã‡§≤‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§π‡•à ‡§ó‡§Ç‡§ó‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§™‡§µ‡§ø‡§§‡•ç‡§∞ ‡§®‡§¶‡•Ä ‡§π‡•à ‡§π‡§ø‡§Æ‡§æ‡§≤‡§Ø ‡§™‡§∞‡•ç‡§µ‡§§ ‡§â‡§§‡•ç‡§§‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•à",
            //             "‡§∞‡§æ‡§Æ ‡§è‡§ï ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§≤‡•ú‡§ï‡§æ ‡§π‡•à ‡§µ‡§π ‡§∞‡•ã‡§ú ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§π‡§Æ‡•á‡§Ç ‡§¨‡•ú‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§¶‡§∞ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‡§∏‡§ö ‡§¨‡•ã‡§≤‡§®‡§æ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Ü‡§¶‡§§ ‡§π‡•à ‡§Æ‡•á‡§π‡§®‡§§ ‡§π‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§π‡•à"
            //         ],
            //         medium: [
            //             "‡§∏‡§´‡§≤‡§§‡§æ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à, ‡§Ö‡§∏‡§´‡§≤‡§§‡§æ ‡§ò‡§æ‡§§‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à: ‡§Ø‡§π ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡§®‡•á ‡§ï‡§æ ‡§∏‡§æ‡§π‡§∏ ‡§π‡•à ‡§ú‡•ã ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à‡•§",
            //             "‡§∏‡§™‡§®‡•á ‡§µ‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡•á ‡§ú‡•ã ‡§Ü‡§™ ‡§∏‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç, ‡§∏‡§™‡§®‡•á ‡§µ‡•ã ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•ã‡§®‡•á ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á‡§§‡•á‡•§",
            //             "‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§á‡§Ø‡§æ‡§Ç ‡§π‡§Æ‡•á‡§Ç ‡§¨‡§∞‡•ç‡§¨‡§æ‡§¶ ‡§ï‡§∞‡§®‡•á ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§§‡•Ä‡§Ç, ‡§¨‡§≤‡•ç‡§ï‡§ø ‡§Ø‡§π ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§õ‡§ø‡§™‡•Ä ‡§π‡•Å‡§à ‡§∏‡§æ‡§Æ‡§∞‡•ç‡§•‡•ç‡§Ø ‡§î‡§∞ ‡§∂‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç‡•§"
            //         ],
            //         hard: [
            //             "‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•ã ‡§¨‡§¶‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§§‡•ç‡§∞‡§ø‡§Æ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§î‡§∞ ‡§Æ‡§∂‡•Ä‡§® ‡§≤‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§Ü‡§ú ‡§ï‡•á ‡§Ø‡•Å‡§ó ‡§ï‡•Ä ‡§Æ‡§æ‡§Ç‡§ó ‡§π‡•à‡§Ç‡•§",
            //             "‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ö‡•ç‡§õ‡•á‡§¶ 370 ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§è‡§ï ‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§•‡§æ‡•§ ‡§á‡§∏‡§∏‡•á ‡§ú‡§Æ‡•ç‡§Æ‡•Ç ‡§î‡§∞ ‡§ï‡§∂‡•ç‡§Æ‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡•Ä ‡§®‡§à ‡§∞‡§æ‡§π‡•á‡§Ç ‡§ñ‡•Å‡§≤‡•Ä ‡§π‡•à‡§Ç‡•§"
            //         ]
            //     }
            // };

            const dataSets = {
                en: {
                    easy: [
                        // Common words practice
                        "the be to of and a in that have I it for not on with he as you do at this but his by from they we say her she or an will my one all would there their what so up out if about who get which go me when make can like time no just him know take people into year your good some could them see other than then now look only come its over think also back after use two how our work first well way even new want because any these give day most us",

                        // Common nouns and objects
                        "time person year way day thing man world life hand part child eye woman place work week case point government company number group problem fact home water power end month system right study book word business issue side kind head house service friend father door hour game line city name student team area money story fact land hand side child",

                        // Simple short words for beginners
                        "a an the and or but not all any few man men can may day say night light might right fight sight work word world would should could book look took good food door floor more four pour your tour",

                        // Pangrams and special sentences
                        "the quick brown fox jumps over the lazy dog pack my box with five dozen liquor jugs how quickly daft jumping zebras vex sphinx of black quartz judge my vow"
                    ],

                    medium: [
                        // Motivational quotes
                        "Success is not final failure is not fatal it is the courage to continue that counts. In the middle of difficulty lies opportunity. The only way to do great work is to love what you do.",

                        // Technology and modern life
                        "Technology is best when it brings people together. Artificial intelligence and machine learning are transforming our world. The digital revolution has changed how we communicate work and live.",

                        // Wisdom quotes
                        "Happiness is not something ready made. It comes from your own actions. Do not dwell in the past do not dream of the future concentrate the mind on the present moment. The best time to plant a tree was twenty years ago. The second best time is now.",

                        // Professional sentences
                        "Please review the attached document and provide your feedback by end of day. The meeting has been rescheduled to next Tuesday at ten in the morning. We appreciate your patience and understanding during this transition period.",

                        // Common typing patterns
                        "The early bird catches the worm. Practice makes perfect. Actions speak louder than words. Time and tide wait for none. Where there is a will there is a way. Knowledge is power and education is the key to success.",

                        // Numbers with words
                        "There are 365 days in a year and 24 hours in a day. The project deadline is December 15 2025. Please call me at 555-1234 or email at contact@example.com."
                    ],

                    hard: [
                        // Programming code
                        "function binarySearch(arr, x) { let l = 0, r = arr.length - 1; while (l <= r) { let m = l + Math.floor((r - l) / 2); if (arr[m] == x) return m; if (arr[m] < x) l = m + 1; else r = m - 1; } return -1; }",

                        "const API_KEY = 'abc123xyz'; const fetchData = async (url) => { try { const response = await fetch(url); const data = await response.json(); return data; } catch (error) { console.error('Error:', error); } };",

                        // Complex technical text
                        "A quantum computer exploits quantum mechanical phenomena such as superposition and entanglement to perform computation. Computers that perform quantum computations are known as quantum computers. Cloud computing is the on-demand availability of computer system resources.",

                        // Mixed symbols and special characters
                        "The formula E = mc¬≤ revolutionized physics. Calculate: (25 + 37) √ó 4 - 18 √∑ 3 = ? Email: user@domain.com | Phone: +91-9876543210 | Price: $99.99 #special @mention & more symbols!",

                        // Advanced programming
                        "class LinkedList { constructor() { this.head = null; } insert(data) { let newNode = {data: data, next: this.head}; this.head = newNode; } display() { let current = this.head; while(current) { console.log(current.data); current = current.next; } } }",

                        // Technical documentation style
                        "Authentication requires a valid JWT token in the Authorization header. The API endpoint supports GET POST PUT and DELETE methods with JSON payloads. Error handling follows RFC 7807 Problem Details specification."
                    ]
                },

                hi: {
                    easy: [
                        // Basic words and phrases
                        "‡§≠‡§æ‡§∞‡§§ ‡§è‡§ï ‡§µ‡§ø‡§∂‡§æ‡§≤ ‡§¶‡•á‡§∂ ‡§π‡•à ‡§Ø‡§π‡§æ‡§Å ‡§Ö‡§®‡•á‡§ï ‡§≠‡§æ‡§∑‡§æ‡§è‡§Ç ‡§¨‡•ã‡§≤‡•Ä ‡§ú‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç ‡§¶‡§ø‡§≤‡•ç‡§≤‡•Ä ‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§π‡•à ‡§ó‡§Ç‡§ó‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§™‡§µ‡§ø‡§§‡•ç‡§∞ ‡§®‡§¶‡•Ä ‡§π‡•à ‡§π‡§ø‡§Æ‡§æ‡§≤‡§Ø ‡§™‡§∞‡•ç‡§µ‡§§ ‡§â‡§§‡•ç‡§§‡§∞ ‡§Æ‡•á‡§Ç ‡§π‡•à ‡§Æ‡•Å‡§Ç‡§¨‡§à ‡§Æ‡§π‡§æ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞ ‡§ï‡•Ä ‡§∞‡§æ‡§ú‡§ß‡§æ‡§®‡•Ä ‡§π‡•à",

                        // Simple sentences for beginners
                        "‡§∞‡§æ‡§Æ ‡§è‡§ï ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§≤‡§°‡§º‡§ï‡§æ ‡§π‡•à ‡§µ‡§π ‡§∞‡•ã‡§ú ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à ‡§π‡§Æ‡•á‡§Ç ‡§¨‡§°‡§º‡•ã‡§Ç ‡§ï‡§æ ‡§Ü‡§¶‡§∞ ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è ‡§∏‡§ö ‡§¨‡•ã‡§≤‡§®‡§æ ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Ü‡§¶‡§§ ‡§π‡•à ‡§Æ‡•á‡§π‡§®‡§§ ‡§π‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§ï‡•Ä ‡§ï‡•Å‡§Ç‡§ú‡•Ä ‡§π‡•à ‡§™‡§¢‡§º‡§æ‡§à ‡§ï‡§∞‡§®‡§æ ‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§π‡•à",

                        // Common words practice
                        "‡§Æ‡•à‡§Ç ‡§§‡•Å‡§Æ ‡§π‡§Æ ‡§µ‡§π ‡§Ø‡§π ‡§ï‡•ç‡§Ø‡§æ ‡§ï‡•å‡§® ‡§ï‡§π‡§æ‡§Å ‡§ï‡§¨ ‡§ï‡•ç‡§Ø‡•ã‡§Ç ‡§ï‡•à‡§∏‡•á ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§¨‡•Å‡§∞‡§æ ‡§¨‡§°‡§º‡§æ ‡§õ‡•ã‡§ü‡§æ ‡§®‡§Ø‡§æ ‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§ï‡§æ‡§≤‡§æ ‡§∏‡§´‡•á‡§¶ ‡§≤‡§æ‡§≤ ‡§®‡•Ä‡§≤‡§æ ‡§π‡§∞‡§æ ‡§™‡•Ä‡§≤‡§æ ‡§ò‡§∞ ‡§∏‡•ç‡§ï‡•Ç‡§≤ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§™‡§æ‡§®‡•Ä ‡§ñ‡§æ‡§®‡§æ ‡§ï‡§ø‡§§‡§æ‡§¨ ‡§ï‡§≤‡§Æ",

                        // Daily life sentences
                        "‡§®‡§Æ‡§∏‡•ç‡§§‡•á ‡§Ü‡§™ ‡§ï‡•à‡§∏‡•á ‡§π‡•à‡§Ç ‡§Æ‡•à‡§Ç ‡§†‡•Ä‡§ï ‡§π‡•Ç‡§Å ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶ ‡§Ü‡§™‡§ï‡§æ ‡§¶‡§ø‡§® ‡§∂‡•Å‡§≠ ‡§π‡•ã ‡§ï‡•É‡§™‡§Ø‡§æ ‡§¨‡•à‡§†‡§ø‡§è ‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§ö‡§æ‡§Ø ‡§≤‡•á‡§Ç‡§ó‡•á ‡§Æ‡•Å‡§ù‡•á ‡§≠‡•Ç‡§ñ ‡§≤‡§ó‡•Ä ‡§π‡•à ‡§∏‡§Æ‡§Ø ‡§ï‡•ç‡§Ø‡§æ ‡§π‡•Å‡§Ü ‡§π‡•à ‡§Æ‡•å‡§∏‡§Æ ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡§æ ‡§π‡•à"
                    ],

                    medium: [
                        // Motivational quotes
                        "‡§∏‡§´‡§≤‡§§‡§æ ‡§Ö‡§Ç‡§§‡§ø‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§Ö‡§∏‡§´‡§≤‡§§‡§æ ‡§ò‡§æ‡§§‡§ï ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à ‡§Ø‡§π ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡§®‡•á ‡§ï‡§æ ‡§∏‡§æ‡§π‡§∏ ‡§π‡•à ‡§ú‡•ã ‡§Æ‡§æ‡§Ø‡§®‡•á ‡§∞‡§ñ‡§§‡§æ ‡§π‡•à‡•§ ‡§ï‡§†‡§ø‡§®‡§æ‡§á‡§Ø‡§æ‡§Å ‡§π‡§Æ‡•á‡§Ç ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§¨‡§®‡§æ‡§§‡•Ä ‡§π‡•à‡§Ç‡•§",

                        "‡§∏‡§™‡§®‡•á ‡§µ‡•ã ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡•á ‡§ú‡•ã ‡§Ü‡§™ ‡§∏‡•ã‡§®‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§¶‡•á‡§ñ‡§§‡•á ‡§π‡•à‡§Ç ‡§∏‡§™‡§®‡•á ‡§µ‡•ã ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç ‡§ú‡•ã ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•ã‡§®‡•á ‡§®‡§π‡•Ä‡§Ç ‡§¶‡•á‡§§‡•á‡•§ ‡§Æ‡•á‡§π‡§®‡§§ ‡§ï‡§æ ‡§´‡§≤ ‡§Æ‡•Ä‡§†‡§æ ‡§π‡•ã‡§§‡§æ ‡§π‡•à‡•§",

                        "‡§ú‡•Ä‡§µ‡§® ‡§Æ‡•á‡§Ç ‡§ï‡§†‡§ø‡§®‡§æ‡§á‡§Ø‡§æ‡§Ç ‡§π‡§Æ‡•á‡§Ç ‡§¨‡§∞‡•ç‡§¨‡§æ‡§¶ ‡§ï‡§∞‡§®‡•á ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§§‡•Ä‡§Ç ‡§¨‡§≤‡•ç‡§ï‡§ø ‡§Ø‡§π ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§õ‡§ø‡§™‡•Ä ‡§π‡•Å‡§à ‡§∏‡§æ‡§Æ‡§∞‡•ç‡§•‡•ç‡§Ø ‡§î‡§∞ ‡§∂‡§ï‡•ç‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§æ‡§π‡§∞ ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡•á ‡§Æ‡•á‡§Ç ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§Æ‡§¶‡§¶ ‡§ï‡§∞‡§§‡•Ä ‡§π‡•à‡§Ç‡•§",

                        // Formal and professional
                        "‡§ï‡•É‡§™‡§Ø‡§æ ‡§∏‡§Ç‡§≤‡§ó‡•ç‡§® ‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú ‡§ï‡•Ä ‡§∏‡§Æ‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§Ö‡§™‡§®‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§¶‡•á‡§Ç‡•§ ‡§¨‡•à‡§†‡§ï ‡§ï‡•ã ‡§Ö‡§ó‡§≤‡•á ‡§Æ‡§Ç‡§ó‡§≤‡§µ‡§æ‡§∞ ‡§¶‡§∏ ‡§¨‡§ú‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•Å‡§®‡§∞‡•ç‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à‡•§ ‡§π‡§Æ ‡§Ü‡§™‡§ï‡•á ‡§∏‡§π‡§Ø‡•ã‡§ó ‡§ï‡•Ä ‡§∏‡§∞‡§æ‡§π‡§®‡§æ ‡§ï‡§∞‡§§‡•á ‡§π‡•à‡§Ç‡•§",

                        // Proverbs and sayings
                        "‡§ú‡•à‡§∏‡•Ä ‡§ï‡§∞‡§®‡•Ä ‡§µ‡•à‡§∏‡•Ä ‡§≠‡§∞‡§®‡•Ä‡•§ ‡§∏‡§Æ‡§Ø ‡§î‡§∞ ‡§∏‡§Æ‡•Å‡§¶‡•ç‡§∞ ‡§ï‡§ø‡§∏‡•Ä ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞‡§§‡•á‡•§ ‡§ú‡§π‡§æ‡§Å ‡§ö‡§æ‡§π ‡§µ‡§π‡§æ‡§Å ‡§∞‡§æ‡§π‡•§ ‡§ú‡•ç‡§û‡§æ‡§® ‡§π‡•Ä ‡§∂‡§ï‡•ç‡§§‡§ø ‡§π‡•à‡•§ ‡§Ö‡§ï‡•ç‡§≤ ‡§¨‡§°‡§º‡•Ä ‡§Ø‡§æ ‡§≠‡•à‡§Ç‡§∏‡•§ ‡§Ö‡§Ç‡§ß‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§®‡§æ ‡§∞‡§æ‡§ú‡§æ‡•§",

                        // Educational content
                        "‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§∏‡§¨‡§∏‡•á ‡§∂‡§ï‡•ç‡§§‡§ø‡§∂‡§æ‡§≤‡•Ä ‡§π‡§•‡§ø‡§Ø‡§æ‡§∞ ‡§π‡•à ‡§ú‡§ø‡§∏‡§∏‡•á ‡§Ü‡§™ ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç‡•§ ‡§ï‡§ø‡§§‡§æ‡§¨‡•á‡§Ç ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡§æ ‡§≠‡§Ç‡§°‡§æ‡§∞ ‡§π‡•à‡§Ç‡•§ ‡§Ö‡§ß‡•ç‡§Ø‡§Ø‡§® ‡§∏‡•á ‡§π‡•Ä ‡§∏‡§´‡§≤‡§§‡§æ ‡§Æ‡§ø‡§≤‡§§‡•Ä ‡§π‡•à‡•§"
                    ],

                    hard: [
                        // Technical and modern topics
                        "‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§π‡§Æ‡§æ‡§∞‡•á ‡§ú‡•Ä‡§µ‡§® ‡§ï‡•ã ‡§¨‡§¶‡§≤ ‡§∞‡§π‡•Ä ‡§π‡•à‡•§ ‡§ï‡•É‡§§‡•ç‡§∞‡§ø‡§Æ ‡§¨‡•Å‡§¶‡•ç‡§ß‡§ø‡§Æ‡§§‡•ç‡§§‡§æ ‡§î‡§∞ ‡§Æ‡§∂‡•Ä‡§® ‡§≤‡§∞‡•ç‡§®‡§ø‡§Ç‡§ó ‡§Ü‡§ú ‡§ï‡•á ‡§Ø‡•Å‡§ó ‡§ï‡•Ä ‡§Æ‡§æ‡§Ç‡§ó ‡§π‡•à‡§Ç‡•§ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ï‡•ç‡§∞‡§æ‡§Ç‡§§‡§ø ‡§®‡•á ‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§ï‡•á ‡§§‡§∞‡•Ä‡§ï‡•á ‡§¨‡§¶‡§≤ ‡§¶‡§ø‡§è ‡§π‡•à‡§Ç‡•§ ‡§∏‡§æ‡§á‡§¨‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§Ü‡§ú ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§¨‡§°‡§º‡•Ä ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§π‡•à‡•§",

                        // Historical and political
                        "‡§∏‡§Ç‡§µ‡§ø‡§ß‡§æ‡§® ‡§ï‡•á ‡§Ö‡§®‡•Å‡§ö‡•ç‡§õ‡•á‡§¶ 370 ‡§ï‡•ã ‡§π‡§ü‡§æ‡§®‡§æ ‡§è‡§ï ‡§ê‡§§‡§ø‡§π‡§æ‡§∏‡§ø‡§ï ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø ‡§•‡§æ‡•§ ‡§á‡§∏‡§∏‡•á ‡§ú‡§Æ‡•ç‡§Æ‡•Ç ‡§î‡§∞ ‡§ï‡§∂‡•ç‡§Æ‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡•Ä ‡§®‡§à ‡§∞‡§æ‡§π‡•á‡§Ç ‡§ñ‡•Å‡§≤‡•Ä ‡§π‡•à‡§Ç‡•§ ‡§≠‡§æ‡§∞‡§§ ‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§∏‡§¨‡§∏‡•á ‡§§‡•á‡§ú‡•Ä ‡§∏‡•á ‡§¨‡§¢‡§º‡§§‡•Ä ‡§Ö‡§∞‡•ç‡§•‡§µ‡•ç‡§Ø‡§µ‡§∏‡•ç‡§•‡§æ‡§ì‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡•á ‡§è‡§ï ‡§π‡•à‡•§",

                        // Scientific content
                        "‡§ï‡•ç‡§µ‡§æ‡§Ç‡§ü‡§Æ ‡§ï‡§Ç‡§™‡•ç‡§Ø‡•Ç‡§ü‡§∞ ‡§ï‡•ç‡§µ‡§æ‡§Ç‡§ü‡§Æ ‡§Ø‡§æ‡§Ç‡§§‡•ç‡§∞‡§ø‡§ï‡•Ä ‡§ò‡§ü‡§®‡§æ‡§ì‡§Ç ‡§ú‡•à‡§∏‡•á ‡§∏‡•Å‡§™‡§∞‡§™‡•ã‡§ú‡§ø‡§∂‡§® ‡§î‡§∞ ‡§â‡§≤‡§ù‡§æ‡§µ ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡§§‡§æ ‡§π‡•à‡•§ ‡§™‡§∞‡§Æ‡§æ‡§£‡•Å ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§µ‡§ø‡§¶‡•ç‡§Ø‡•Å‡§§ ‡§â‡§§‡•ç‡§™‡§æ‡§¶‡§® ‡§ï‡§æ ‡§è‡§ï ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•ç‡§∞‡•ã‡§§ ‡§π‡•à‡•§",

                        // Complex sentences with numbers
                        "‡§≠‡§æ‡§∞‡§§ ‡§ï‡•Ä ‡§ú‡§®‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ ‡§≤‡§ó‡§≠‡§ó 140 ‡§ï‡§∞‡•ã‡§°‡§º ‡§π‡•à‡•§ ‡§∏‡•ç‡§µ‡§§‡§Ç‡§§‡•ç‡§∞‡§§‡§æ ‡§¶‡§ø‡§µ‡§∏ 15 ‡§Ö‡§ó‡§∏‡•ç‡§§ 1947 ‡§ï‡•ã ‡§Æ‡§®‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§§‡§æ ‡§π‡•à‡•§ ‡§Ü‡§à‡§Ü‡§à‡§ü‡•Ä ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§µ‡•á‡§∂ ‡§™‡§∞‡•Ä‡§ï‡•ç‡§∑‡§æ ‡§Æ‡•á‡§Ç 2.5 ‡§≤‡§æ‡§ñ ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§∂‡§æ‡§Æ‡§ø‡§≤ ‡§π‡•ã‡§§‡•á ‡§π‡•à‡§Ç‡•§",

                        // Literary and philosophical
                        "‡§ï‡§∞‡•ç‡§Æ ‡§™‡•ç‡§∞‡§ß‡§æ‡§® ‡§µ‡§ø‡§∂‡•ç‡§µ ‡§∞‡§ö‡•Ä ‡§∞‡§æ‡§ñ‡§æ‡•§ ‡§ú‡•ã ‡§ú‡§∏ ‡§ï‡§∞‡§π‡§ø ‡§∏‡•ã ‡§§‡§∏ ‡§´‡§≤ ‡§ö‡§æ‡§ñ‡§æ‡•§ ‡§ú‡•Ä‡§µ‡§® ‡§ï‡§æ ‡§â‡§¶‡•ç‡§¶‡•á‡§∂‡•ç‡§Ø ‡§ñ‡•Å‡§∂‡•Ä ‡§î‡§∞ ‡§∏‡§Ç‡§§‡•ã‡§∑ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡§æ ‡§π‡•à‡•§ ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§® ‡§î‡§∞ ‡§Ö‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ ‡§¶‡•ã‡§®‡•ã‡§Ç ‡§Æ‡§ø‡§≤‡§ï‡§∞ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§ú‡•ç‡§û‡§æ‡§® ‡§¶‡•á‡§§‡•á ‡§π‡•à‡§Ç‡•§",

                        // Government and formal language
                        "‡§Æ‡§æ‡§®‡§®‡•Ä‡§Ø ‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§®‡•á ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§® ‡§ï‡•Ä ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡•Ä‡•§ ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§≤‡§æ‡§≠ ‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§®‡§æ‡§ó‡§∞‡§ø‡§ï ‡§§‡§ï ‡§™‡§π‡•Å‡§Ç‡§ö‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è‡•§ ‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§®‡•Ä‡§§‡§ø 2020 ‡§Æ‡•á‡§Ç ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡§ø‡§è ‡§ó‡§è ‡§π‡•à‡§Ç‡•§"
                    ]
                }
            };


            const wordsContainer = document.getElementById("wordsContainer");
            const inputField = document.getElementById("inputField");
            const timeTag = document.getElementById("timeLeft");
            const wpmTag = document.getElementById("wpmTag");
            const cpmTag = document.getElementById("cpmTag");
            const accTag = document.getElementById("accTag");
            const highScoreEl = document.getElementById("highScore");
            const focusOverlay = document.getElementById("focusOverlay");
            const resultModal = document.getElementById("resultModal");
            const resultTitle = document.getElementById("resultTitle");
            const soundBtn = document.getElementById("soundBtn");
            const clickSound = document.getElementById("soundClick");
            const errorSound = document.getElementById("soundError");
            const failSound = document.getElementById("soundFail");
            const cursor = document.getElementById("cursor");
            const customTextModal = document.getElementById("customTextModal");
            const customTextInput = document.getElementById("customTextInput");
            const appBody = document.getElementById("appBody");
            const typingArea = document.getElementById("typingArea");
            const wpmChartCanvas = document.getElementById("wpmChart");
            const historyBody = document.getElementById("historyBody");

            let timer;
            let maxTime = 60;
            let timeLeft = maxTime;
            let charIndex = 0;
            let mistakes = 0;
            let totalTypedChars = 0;
            let isTyping = false;
            let isSoundOn = true;
            let currentMode = 'medium';
            let currentLang = 'en';
            let customText = "";
            let wpmHistory = [];
            let chartInstance = null;
            let characterArray = [];
            let startTime = 0;

            // Adjust volume
            clickSound.volume = 0.4;
            errorSound.volume = 0.3;
            failSound.volume = 0.4;

            // Load High Score & History
            const encodedScore = localStorage.getItem('typing_high_score');
            const savedScore = encodedScore ? parseInt(atob(encodedScore)) : 0; // Simple decode
            highScoreEl.innerText = savedScore;
            loadHistory();

            window.changeTheme = function (theme) {
                appBody.className = `flex flex-col h-screen selection:bg-orange-500 selection:text-white theme-${theme}`;
            }

            window.toggleSound = function () {
                isSoundOn = !isSoundOn;
                soundBtn.innerHTML = isSoundOn ? '<i class="fa-solid fa-volume-high text-lg"></i>' : '<i class="fa-solid fa-volume-xmark text-lg"></i>';
                soundBtn.style.color = isSoundOn ? 'var(--primary-color)' : '#64748b';
            }

            window.setLang = function (lang, btn) {
                currentLang = lang;
                document.querySelectorAll('.lang-btn').forEach(b => {
                    b.style.backgroundColor = 'transparent';
                    b.style.color = '#94a3b8';
                });
                btn.style.backgroundColor = 'var(--primary-color)';
                btn.style.color = 'white';

                if (lang === 'hi') {
                    wordsContainer.classList.remove('font-mono');
                    wordsContainer.classList.add('font-hindi');
                    typingArea.classList.remove('font-mono');
                    typingArea.classList.add('font-hindi');
                } else {
                    wordsContainer.classList.add('font-mono');
                    wordsContainer.classList.remove('font-hindi');
                    typingArea.classList.add('font-mono');
                    typingArea.classList.remove('font-hindi');
                }

                resetGame();
            }

            window.setMode = function (mode, btn) {
                currentMode = mode;
                document.querySelectorAll('.mode-btn').forEach(b => {
                    b.style.backgroundColor = 'transparent';
                    b.style.color = '#94a3b8';
                    b.style.borderColor = 'transparent';
                });

                if (mode === 'suddenDeath') {
                    btn.style.backgroundColor = '#991b1b';
                    btn.style.color = 'white';
                } else {
                    btn.style.backgroundColor = 'var(--primary-color)';
                    btn.style.color = 'white';
                }

                resetGame();
            }

            window.setTime = function (seconds, btn) {
                maxTime = seconds;
                document.querySelectorAll('.time-btn').forEach(b => {
                    b.style.backgroundColor = 'transparent';
                    b.style.color = '#94a3b8';
                });
                btn.style.backgroundColor = 'var(--primary-color)';
                btn.style.color = 'white';
                resetGame();
            }

            window.openCustomTextModal = function () {
                customTextModal.classList.remove('hidden');
                customTextInput.focus();
            }

            window.closeCustomTextModal = function () {
                customTextModal.classList.add('hidden');
            }

            window.applyCustomText = function () {
                const text = customTextInput.value.trim();
                if (text.length > 10) {
                    customText = text;
                    currentMode = 'custom';

                    document.querySelectorAll('.mode-btn').forEach(b => {
                        b.style.backgroundColor = 'transparent';
                        b.style.color = '#94a3b8';
                    });

                    closeCustomTextModal();
                    resetGame();
                } else {
                    alert("Please enter at least 10 characters.");
                }
            }

            function loadParagraph() {
                let text = "";
                if (currentMode === 'custom' && customText) {
                    text = customText;
                } else {
                    const modeKey = currentMode === 'suddenDeath' ? 'medium' : currentMode;
                    const source = dataSets[currentLang][modeKey];
                    const randIndex = Math.floor(Math.random() * source.length);
                    text = source[randIndex];

                    if (currentMode === 'easy') {
                        const words = text.split(" ");
                        text = "";
                        for (let i = 0; i < 50; i++) {
                            text += words[Math.floor(Math.random() * words.length)] + " ";
                        }
                    }
                }

                wordsContainer.innerHTML = "";
                wordsContainer.appendChild(cursor);
                cursor.style.display = "block";

                if (window.Intl && Intl.Segmenter) {
                    const segmenter = new Intl.Segmenter(currentLang === 'hi' ? 'hi' : 'en', { granularity: 'grapheme' });
                    characterArray = Array.from(segmenter.segment(text)).map(seg => seg.segment);
                } else {
                    characterArray = text.split("");
                }

                characterArray.forEach(char => {
                    let span = document.createElement("span");
                    span.innerText = char;
                    wordsContainer.appendChild(span);
                });

                updateCursorPosition(0);
            }

            function updateCursorPosition(index) {
                const spans = wordsContainer.querySelectorAll("span");
                if (index < spans.length) {
                    const span = spans[index];
                    cursor.style.left = span.offsetLeft + "px";
                    cursor.style.top = (span.offsetTop + 4) + "px";
                } else if (spans.length > 0) {
                    const last = spans[spans.length - 1];
                    cursor.style.left = (last.offsetLeft + last.offsetWidth) + "px";
                    cursor.style.top = (last.offsetTop + 4) + "px";
                }
            }

            function initTyping() {
                const characters = wordsContainer.querySelectorAll("span");
                let val = inputField.value;

                let userChars = [];
                if (window.Intl && Intl.Segmenter) {
                    const segmenter = new Intl.Segmenter(currentLang === 'hi' ? 'hi' : 'en', { granularity: 'grapheme' });
                    userChars = Array.from(segmenter.segment(val)).map(seg => seg.segment);
                } else {
                    userChars = val.split("");
                }

                // Handle Backspace / Deletion
                if (userChars.length < charIndex) {
                    let newIndex = userChars.length;
                    for (let i = charIndex - 1; i >= newIndex; i--) {
                        characters[i].classList.remove("correct", "incorrect");
                    }
                    charIndex = newIndex;
                }
                // Handle Typing
                else if (userChars.length > charIndex) {
                    if (!isTyping) {
                        startTime = Date.now();
                        timer = setInterval(initTimer, 100);
                        isTyping = true;
                        focusOverlay.classList.add("hidden");
                        document.body.classList.add("typing-active");
                        wpmHistory = [];
                    }

                    for (let i = charIndex; i < userChars.length; i++) {
                        if (i >= characters.length) break;

                        let typed = userChars[i];
                        let target = characterArray[i];

                        totalTypedChars++;

                        if (typed === target) {
                            characters[i].classList.add("correct");
                            if (isSoundOn) {
                                clickSound.currentTime = 0;
                                clickSound.play().catch(() => { });
                            }
                        } else {
                            mistakes++;
                            characters[i].classList.add("incorrect");
                            if (isSoundOn) {
                                errorSound.currentTime = 0;
                                errorSound.play().catch(() => { });
                            }

                            if (currentMode === 'suddenDeath') {
                                gameOverSuddenDeath();
                                return;
                            }
                        }
                    }
                    charIndex = userChars.length;
                }

                // Check End
                if (charIndex >= characterArray.length) {
                    clearInterval(timer);
                    showResult();
                    return;
                }

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    inputField.value = "";
                    showResult();
                    return;
                }

                updateCursorPosition(charIndex);
                updateStats();

                // Fixed Auto Scroll
                const activeSpan = characters[charIndex];
                if (activeSpan) {
                    const containerTop = Math.abs(parseInt(wordsContainer.style.top || 0));
                    const charTop = activeSpan.offsetTop;

                    // 100 is approx 3 lines down
                    if (charTop - containerTop > 100) {
                        wordsContainer.style.top = `-${containerTop + 36}px`;
                    }
                }
            }

            function gameOverSuddenDeath() {
                clearInterval(timer);
                inputField.blur();
                if (isSoundOn) failSound.play();

                resultTitle.innerText = "Game Over (Sudden Death)";
                resultTitle.style.color = "#ef4444";
                showResult();
            }

            function initTimer() {
                const elapsed = (Date.now() - startTime) / 1000;
                timeLeft = Math.max(0, Math.ceil(maxTime - elapsed));
                timeTag.innerText = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    showResult();
                }

                if (Math.floor(elapsed) > wpmHistory.length) {
                    const wpm = calculateWPM(elapsed);
                    wpmHistory.push(wpm);
                }
            }

            function calculateWPM(timeInSeconds) {
                if (timeInSeconds <= 0) return 0;
                const correctChars = charIndex - (document.querySelectorAll('.incorrect').length);
                const wpm = Math.round((correctChars / 5) / (timeInSeconds / 60));
                return (wpm < 0 || wpm === Infinity) ? 0 : wpm;
            }

            function updateStats() {
                const elapsed = (Date.now() - startTime) / 1000;
                if (elapsed <= 0) return;

                const wpm = calculateWPM(elapsed);
                const cpm = Math.round(charIndex / (elapsed / 60));

                let accuracy = 0;
                if (charIndex > 0) {
                    const currentMistakes = document.querySelectorAll('.incorrect').length;
                    accuracy = Math.round(((charIndex - currentMistakes) / charIndex) * 100);
                } else {
                    accuracy = 100;
                }

                wpmTag.innerText = wpm;
                cpmTag.innerText = cpm;
                accTag.innerText = accuracy + "%";
            }

            function showResult() {
                resultModal.classList.remove("hidden");
                document.body.classList.remove("typing-active");

                const timeSpent = Math.min(maxTime, (Date.now() - startTime) / 1000);
                const safeTime = timeSpent <= 0 ? 1 : timeSpent;

                const currentMistakes = document.querySelectorAll('.incorrect').length;
                const correctChars = charIndex - currentMistakes;
                let netWpm = Math.round((correctChars / 5) / (safeTime / 60));
                if (isNaN(netWpm) || netWpm < 0) netWpm = 0;

                let grossWpm = Math.round((totalTypedChars / 5) / (safeTime / 60));
                if (isNaN(grossWpm)) grossWpm = 0;

                let cpm = Math.round((charIndex - mistakes) / (safeTime / 60));
                if (isNaN(cpm) || cpm === Infinity) cpm = 0;

                let accuracy = charIndex > 0 ? Math.round((correctChars / charIndex) * 100) : 0;
                if (isNaN(accuracy)) accuracy = 0;

                document.getElementById("resWpm").innerText = netWpm;
                document.getElementById("resGrossWpm").innerText = grossWpm;
                document.getElementById("resAcc").innerText = accuracy + "%";
                document.getElementById("resCpm").innerText = cpm;
                document.getElementById("resMistakes").innerText = mistakes;

                const encodedCurrentBest = localStorage.getItem('typing_high_score');
                const currentBest = encodedCurrentBest ? parseInt(atob(encodedCurrentBest)) : 0;

                if (netWpm > currentBest) {
                    localStorage.setItem('typing_high_score', btoa(netWpm.toString()));
                    highScoreEl.innerText = netWpm;
                }

                saveHistory(netWpm, accuracy, currentMode);
                drawChart();
            }

            function saveHistory(wpm, acc, mode) {
                const history = JSON.parse(localStorage.getItem('typing_history') || '[]');
                const date = new Date().toLocaleDateString();
                history.unshift({ wpm, acc, mode, date });
                if (history.length > 20) history.pop();
                localStorage.setItem('typing_history', JSON.stringify(history));
                loadHistory();
            }

            function loadHistory() {
                const history = JSON.parse(localStorage.getItem('typing_history') || '[]');
                if (!historyBody) return;

                historyBody.innerHTML = '';
                if (history.length === 0) {
                    historyBody.innerHTML = '<tr><td colspan="4" class="px-3 py-4 text-center italic opacity-50">No tests yet</td></tr>';
                } else {
                    history.forEach(item => {
                        const row = `
                            <tr>
                                <td class="px-3 py-2 font-bold" style="color: var(--primary-color);">${item.wpm}</td>
                                <td class="px-3 py-2 text-green-400">${item.acc}%</td>
                                <td class="px-3 py-2 text-right text-slate-500 text-[10px]">${item.date}</td>
                                <td class="px-3 py-2 text-right text-xs capitalize text-slate-400 hidden sm:table-cell">${item.mode || '-'}</td>
                            </tr>
                        `;
                        historyBody.innerHTML += row;
                    });
                }
            }

            function drawChart() {
                if (chartInstance) chartInstance.destroy();
                const ctx = wpmChartCanvas.getContext('2d');
                chartInstance = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: Array.from({ length: wpmHistory.length }, (_, i) => i + 1),
                        datasets: [{
                            label: 'WPM',
                            data: wpmHistory,
                            borderColor: getComputedStyle(document.body).getPropertyValue('--primary-color').trim(),
                            backgroundColor: 'rgba(251, 146, 60, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            fill: true,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { display: false }, y: { beginAtZero: true, grid: { color: 'rgba(255, 255, 255, 0.1)' } } }
                    }
                });
            }

            window.downloadCertificate = function () {
                const canvas = document.createElement("canvas");
                canvas.width = 1000;
                canvas.height = 700;
                const ctx = canvas.getContext("2d");

                const wpm = document.getElementById("resWpm").innerText;
                const acc = document.getElementById("resAcc").innerText;
                const date = new Date().toLocaleDateString();
                const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary-color').trim();

                ctx.fillStyle = "#0f172a";
                ctx.fillRect(0, 0, 1000, 700);

                ctx.strokeStyle = primaryColor;
                ctx.lineWidth = 15;
                ctx.strokeRect(30, 30, 940, 640);

                ctx.fillStyle = primaryColor;
                ctx.font = "bold 60px 'Cinzel', serif";
                ctx.textAlign = "center";
                ctx.fillText("CERTIFICATE", 500, 150);

                ctx.fillStyle = "#ffffff";
                ctx.font = "30px 'Inter', sans-serif";
                ctx.fillText("OF TYPING EXCELLENCE", 500, 200);

                ctx.font = "italic 24px 'Inter', sans-serif";
                ctx.fillStyle = "#94a3b8";
                ctx.fillText("This certifies that the user has achieved", 500, 300);

                ctx.font = "bold 80px 'Roboto Mono', monospace";
                ctx.fillStyle = "#ffffff";
                ctx.fillText(wpm + " WPM", 500, 400);

                ctx.font = "30px 'Inter', sans-serif";
                ctx.fillStyle = "#4ade80";
                ctx.fillText("with " + acc + " Accuracy", 500, 450);

                ctx.font = "20px 'Inter', sans-serif";
                ctx.fillStyle = "#64748b";
                ctx.fillText("Date: " + date, 200, 600);
                ctx.fillText("Verified by TypeMaster Pro", 800, 600);

                document.fonts.ready.then(() => {
                    const link = document.createElement('a');
                    link.download = `Certificate_${wpm}WPM.png`;
                    link.href = canvas.toDataURL();
                    link.click();
                });
            }

            window.resetGame = function () {
                loadParagraph();
                clearInterval(timer);
                timeLeft = maxTime;
                charIndex = mistakes = 0;
                totalTypedChars = 0;
                isTyping = false;
                inputField.value = "";
                timeTag.innerText = timeLeft;
                wpmTag.innerText = 0;
                cpmTag.innerText = 0;
                accTag.innerText = "100%";
                wpmHistory = [];
                resultTitle.innerText = "Result";
                resultTitle.style.color = "white";

                resultModal.classList.add("hidden");
                focusOverlay.classList.remove("hidden");
                document.body.classList.remove("typing-active");

                wordsContainer.style.top = "0px";
                updateCursorPosition(0);

                inputField.focus();
            }

            // Expose clearHistory globally
            window.clearHistory = function () {
                localStorage.removeItem('typing_history');
                loadHistory();
            }

            window.focusInput = function () {
                inputField.focus();
                focusOverlay.classList.add("hidden");
            }

            inputField.addEventListener("input", initTyping);

            // Handle Ctrl+Backspace (Word Delete)
            inputField.addEventListener("keydown", (e) => {
                if (e.key === 'Tab') {
                    e.preventDefault();
                    resetGame();
                }

                if (resultModal.classList.contains('hidden') && customTextModal.classList.contains('hidden')) {
                    inputField.focus();
                }
            });

            loadParagraph();

            // Initial load of history
            loadHistory();
        })();
    </script>
</body>

</html>