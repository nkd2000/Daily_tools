
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stopwatch & Timer | Free Online Tools</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online stopwatch and countdown timer. Features split laps, alarm sound, and large digital display. Ideal for workouts, study, and cooking.">
    <meta name="keywords" content="stopwatch, countdown timer, online timer, alarm clock, lap timer, productivity tool">
    <meta name="author" content="Free Online Tools">

    <!-- Open Graph -->
    <meta property="og:title" content="Stopwatch & Countdown Timer">
    <meta property="og:description" content="Precise digital stopwatch and timer for your daily tasks.">
    
    <!-- User's AdSense -->
    <meta name="google-adsense-account" content="ca-pub-3793390054330330">
    <script data-ad-client="ca-pub-3793390054330330" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        /* Tab Active State */
        .tab-active {
            background-color: #3b82f6;
            color: white;
        }
        .tab-inactive {
            background-color: #1e293b;
            color: #94a3b8;
        }
        
        /* Progress Circle */
        .progress-ring__circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-slate-800 border-b border-slate-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 text-white p-2 rounded-lg">
                        <i class="fa-solid fa-clock"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-white">Chrono</span>
                </div>
                <div class="flex items-center gap-6 text-sm font-medium text-slate-400">
                    <a href="../../index.html" class="hover:text-blue-400 transition">Home</a>
                    <a href="https://jansuchnaforall.blogspot.com" target="_blank" class="hover:text-blue-400 transition">Blog</a>
                    <a href="../../pages/contact.html" class="hover:text-blue-400 transition">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-4xl mx-auto px-4 py-12 sm:px-6 w-full">
        
        <!-- Tabs -->
        <div class="flex justify-center mb-10">
            <div class="bg-slate-800 p-1.5 rounded-xl inline-flex">
                <button id="tabStopwatch" class="px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-active" onclick="switchTab('stopwatch')">
                    <i class="fa-solid fa-stopwatch"></i> Stopwatch
                </button>
                <button id="tabTimer" class="px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-inactive" onclick="switchTab('timer')">
                    <i class="fa-solid fa-hourglass-half"></i> Timer
                </button>
            </div>
        </div>

        <!-- SECTION: STOPWATCH -->
        <div id="stopwatchSection" class="fade-in">
            <!-- Display -->
            <div class="text-center mb-12">
                <div class="font-mono text-6xl sm:text-8xl font-bold text-white tracking-wider tabular-nums drop-shadow-lg">
                    <span id="swMin">00</span>:<span id="swSec">00</span><span class="text-3xl sm:text-5xl text-blue-400">.<span id="swMs">00</span></span>
                </div>
            </div>

            <!-- Controls -->
            <div class="flex justify-center gap-4 mb-12">
                <button id="swResetBtn" class="w-14 h-14 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-300 transition flex items-center justify-center" onclick="resetStopwatch()">
                    <i class="fa-solid fa-rotate-left text-xl"></i>
                </button>
                <button id="swStartBtn" class="w-20 h-20 rounded-full bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/50 transition flex items-center justify-center transform active:scale-95" onclick="toggleStopwatch()">
                    <i class="fa-solid fa-play text-3xl pl-1"></i>
                </button>
                <button id="swLapBtn" class="w-14 h-14 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-300 transition flex items-center justify-center" onclick="recordLap()" disabled>
                    <i class="fa-solid fa-flag text-xl"></i>
                </button>
            </div>

            <!-- Laps -->
            <div class="max-w-md mx-auto">
                <div class="flex justify-between items-center mb-3 px-4 text-xs font-bold text-slate-500 uppercase tracking-wider">
                    <span>Lap No.</span>
                    <span>Time</span>
                </div>
                <div id="lapsList" class="bg-slate-800 rounded-xl overflow-hidden max-h-64 overflow-y-auto border border-slate-700 divide-y divide-slate-700/50">
                    <!-- Laps injected here -->
                    <div class="p-8 text-center text-slate-600 text-sm italic" id="noLapsMsg">No laps recorded</div>
                </div>
            </div>
        </div>

        <!-- SECTION: TIMER -->
        <div id="timerSection" class="hidden fade-in">
            
            <!-- Timer Display / Input -->
            <div class="relative w-72 h-72 mx-auto mb-12 flex items-center justify-center">
                <!-- SVG Circle -->
                <svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100">
                    <circle class="text-slate-800 stroke-current" stroke-width="4" cx="50" cy="50" r="45" fill="transparent"></circle>
                    <circle id="timerRing" class="text-blue-500 progress-ring__circle stroke-current" stroke-width="4" stroke-linecap="round" cx="50" cy="50" r="45" fill="transparent" stroke-dasharray="282.7" stroke-dashoffset="0"></circle>
                </svg>
                
                <!-- Time Input (Visible when editing) -->
                <div id="timerInput" class="flex items-center gap-1 text-4xl font-mono font-bold text-white relative z-10">
                    <input type="number" id="inHrs" class="w-16 bg-transparent text-center outline-none placeholder-slate-600 focus:border-b-2 border-blue-500 appearance-none" placeholder="00" min="0" max="99" oninput="validateTime(this)">
                    <span class="text-slate-500 pb-2">:</span>
                    <input type="number" id="inMin" class="w-16 bg-transparent text-center outline-none placeholder-slate-600 focus:border-b-2 border-blue-500 appearance-none" placeholder="00" min="0" max="59" oninput="validateTime(this)">
                    <span class="text-slate-500 pb-2">:</span>
                    <input type="number" id="inSec" class="w-16 bg-transparent text-center outline-none placeholder-slate-600 focus:border-b-2 border-blue-500 appearance-none" placeholder="00" min="0" max="59" oninput="validateTime(this)">
                </div>

                <!-- Countdown Display (Visible when running) -->
                <div id="timerDisplay" class="hidden text-5xl font-mono font-bold text-white z-10">
                    00:00:00
                </div>
            </div>

            <!-- Controls -->
            <div class="flex justify-center gap-4">
                <button id="tmResetBtn" class="w-14 h-14 rounded-full bg-slate-800 hover:bg-slate-700 text-slate-300 transition flex items-center justify-center" onclick="resetTimer()">
                    <i class="fa-solid fa-rotate-left text-xl"></i>
                </button>
                <button id="tmStartBtn" class="w-20 h-20 rounded-full bg-blue-600 hover:bg-blue-500 text-white shadow-lg shadow-blue-900/50 transition flex items-center justify-center transform active:scale-95" onclick="toggleTimer()">
                    <i class="fa-solid fa-play text-3xl pl-1"></i>
                </button>
            </div>
            
            <!-- Audio Element -->
            <audio id="alarmAudio" src="https://actions.google.com/sounds/v1/alarms/digital_watch_alarm_long.ogg"></audio>

        </div>

    </main>

    <footer class="bg-slate-800 border-t border-slate-700 mt-auto">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-slate-500">
                &copy; 2023 Free Online Tools. <a href="../../pages/privacy.html" class="text-blue-500 hover:text-blue-400">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <script>
        (function() {
            // --- TABS ---
            window.switchTab = function(tab) {
                const swSec = document.getElementById('stopwatchSection');
                const tmSec = document.getElementById('timerSection');
                const tabSw = document.getElementById('tabStopwatch');
                const tabTm = document.getElementById('tabTimer');

                if (tab === 'stopwatch') {
                    swSec.classList.remove('hidden');
                    tmSec.classList.add('hidden');
                    tabSw.className = "px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-active";
                    tabTm.className = "px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-inactive";
                } else {
                    swSec.classList.add('hidden');
                    tmSec.classList.remove('hidden');
                    tabSw.className = "px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-inactive";
                    tabTm.className = "px-6 py-2.5 rounded-lg text-sm font-bold transition flex items-center gap-2 tab-active";
                }
            }

            // --- STOPWATCH LOGIC ---
            let swInterval = null;
            let swStartTime = 0;
            let swElapsedTime = 0;
            let swRunning = false;
            let lapCount = 1;

            const swMin = document.getElementById('swMin');
            const swSec = document.getElementById('swSec');
            const swMs = document.getElementById('swMs');
            const swStartBtn = document.getElementById('swStartBtn');
            const swLapBtn = document.getElementById('swLapBtn');
            const lapsList = document.getElementById('lapsList');
            const noLapsMsg = document.getElementById('noLapsMsg');

            window.toggleStopwatch = function() {
                if (swRunning) {
                    // Pause
                    clearInterval(swInterval);
                    swRunning = false;
                    swStartBtn.innerHTML = '<i class="fa-solid fa-play text-3xl pl-1"></i>';
                    swStartBtn.classList.replace('bg-yellow-500', 'bg-blue-600');
                    swStartBtn.classList.replace('hover:bg-yellow-400', 'hover:bg-blue-500');
                    swLapBtn.disabled = true;
                } else {
                    // Start
                    swStartTime = Date.now() - swElapsedTime;
                    swInterval = setInterval(updateStopwatch, 10);
                    swRunning = true;
                    swStartBtn.innerHTML = '<i class="fa-solid fa-pause text-3xl"></i>';
                    swStartBtn.classList.replace('bg-blue-600', 'bg-yellow-500');
                    swStartBtn.classList.replace('hover:bg-blue-500', 'hover:bg-yellow-400');
                    swLapBtn.disabled = false;
                }
            }

            function updateStopwatch() {
                const now = Date.now();
                swElapsedTime = now - swStartTime;
                
                const time = formatTime(swElapsedTime);
                swMin.textContent = time.m;
                swSec.textContent = time.s;
                swMs.textContent = time.ms;
            }

            window.resetStopwatch = function() {
                clearInterval(swInterval);
                swRunning = false;
                swElapsedTime = 0;
                swMin.textContent = "00";
                swSec.textContent = "00";
                swMs.textContent = "00";
                swStartBtn.innerHTML = '<i class="fa-solid fa-play text-3xl pl-1"></i>';
                swStartBtn.classList.replace('bg-yellow-500', 'bg-blue-600');
                swLapBtn.disabled = true;
                
                // Clear Laps
                lapsList.innerHTML = '';
                lapsList.appendChild(noLapsMsg);
                lapCount = 1;
            }

            window.recordLap = function() {
                if (!swRunning) return;
                
                if(lapCount === 1) noLapsMsg.remove();

                const time = formatTime(swElapsedTime);
                const lapTimeStr = `${time.m}:${time.s}.${time.ms}`;
                
                const div = document.createElement('div');
                div.className = "flex justify-between items-center px-4 py-3 text-sm font-mono fade-in";
                div.innerHTML = `
                    <span class="text-slate-400">Lap ${lapCount}</span>
                    <span class="text-white font-bold">${lapTimeStr}</span>
                `;
                
                lapsList.prepend(div);
                lapCount++;
            }

            function formatTime(ms) {
                const minutes = Math.floor(ms / 60000);
                const seconds = Math.floor((ms % 60000) / 1000);
                const milliseconds = Math.floor((ms % 1000) / 10);

                return {
                    m: minutes.toString().padStart(2, '0'),
                    s: seconds.toString().padStart(2, '0'),
                    ms: milliseconds.toString().padStart(2, '0')
                };
            }


            // --- TIMER LOGIC ---
            let tmInterval = null;
            let tmTotalSeconds = 0;
            let tmRemainingSeconds = 0;
            let tmRunning = false;

            const inHrs = document.getElementById('inHrs');
            const inMin = document.getElementById('inMin');
            const inSec = document.getElementById('inSec');
            const timerDisplay = document.getElementById('timerDisplay');
            const timerInput = document.getElementById('timerInput');
            const tmStartBtn = document.getElementById('tmStartBtn');
            const timerRing = document.getElementById('timerRing');
            const alarmAudio = document.getElementById('alarmAudio');
            
            // Ring Circumference = 2 * PI * r(45) = 282.7
            const CIRCUMFERENCE = 282.7;
            timerRing.style.strokeDasharray = `${CIRCUMFERENCE} ${CIRCUMFERENCE}`;

            function setProgress(percent) {
                const offset = CIRCUMFERENCE - (percent / 100) * CIRCUMFERENCE;
                timerRing.style.strokeDashoffset = offset;
            }

            window.validateTime = function(el) {
                if (el.value.length > 2) el.value = el.value.slice(0, 2);
            }

            window.toggleTimer = function() {
                if (tmRunning) {
                    // Pause
                    clearInterval(tmInterval);
                    tmRunning = false;
                    tmStartBtn.innerHTML = '<i class="fa-solid fa-play text-3xl pl-1"></i>';
                    tmStartBtn.classList.replace('bg-yellow-500', 'bg-blue-600');
                    alarmAudio.pause();
                    alarmAudio.currentTime = 0;
                } else {
                    // Start
                    if (tmRemainingSeconds === 0) {
                        const h = parseInt(inHrs.value) || 0;
                        const m = parseInt(inMin.value) || 0;
                        const s = parseInt(inSec.value) || 0;
                        
                        tmTotalSeconds = (h * 3600) + (m * 60) + s;
                        if(tmTotalSeconds <= 0) return alert("Please set a time first!");
                        
                        tmRemainingSeconds = tmTotalSeconds;
                        
                        // Switch Views
                        timerInput.classList.add('hidden');
                        timerDisplay.classList.remove('hidden');
                    }

                    tmInterval = setInterval(updateTimer, 1000);
                    tmRunning = true;
                    tmStartBtn.innerHTML = '<i class="fa-solid fa-pause text-3xl"></i>';
                    tmStartBtn.classList.replace('bg-blue-600', 'bg-yellow-500');
                    
                    // Immediate update to avoid delay
                    updateTimerDisplay();
                }
            }

            function updateTimer() {
                if (tmRemainingSeconds > 0) {
                    tmRemainingSeconds--;
                    updateTimerDisplay();
                    
                    const percent = (tmRemainingSeconds / tmTotalSeconds) * 100;
                    setProgress(percent);
                } else {
                    // Timer Finished
                    finishTimer();
                }
            }

            function updateTimerDisplay() {
                const h = Math.floor(tmRemainingSeconds / 3600);
                const m = Math.floor((tmRemainingSeconds % 3600) / 60);
                const s = tmRemainingSeconds % 60;
                
                timerDisplay.textContent = `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }

            function finishTimer() {
                clearInterval(tmInterval);
                tmRunning = false;
                setProgress(0);
                tmStartBtn.innerHTML = '<i class="fa-solid fa-rotate-left text-3xl"></i>'; // Show reset icon logic or just stop
                tmStartBtn.classList.replace('bg-yellow-500', 'bg-blue-600');
                
                // Play Sound
                alarmAudio.play().catch(e => console.log("Audio play failed", e));
                
                // Reset tracking so next click resets
                tmRemainingSeconds = 0; 
            }

            window.resetTimer = function() {
                clearInterval(tmInterval);
                tmRunning = false;
                tmRemainingSeconds = 0;
                tmTotalSeconds = 0;
                setProgress(100);
                
                alarmAudio.pause();
                alarmAudio.currentTime = 0;

                tmStartBtn.innerHTML = '<i class="fa-solid fa-play text-3xl pl-1"></i>';
                tmStartBtn.classList.replace('bg-yellow-500', 'bg-blue-600');
                
                // Show Inputs
                timerDisplay.classList.add('hidden');
                timerInput.classList.remove('hidden');
                inHrs.value = '';
                inMin.value = '';
                inSec.value = '';
            }

        })();
    </script>
</body>
</html>