
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON Formatter & Validator | Free Online Tools</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Free online JSON formatter, validator, and minifier. Beautify your JSON code with syntax highlighting and error detection.">
    <meta name="keywords" content="json formatter, json validator, json beautifier, json minifier, online json viewer, json lint">
    <meta name="author" content="Free Online Tools">

    <!-- Open Graph -->
    <meta property="og:title" content="JSON Formatter & Validator">
    <meta property="og:description" content="Format, validate, and minify JSON data instantly.">
    
    <!-- User's AdSense -->
    <meta name="google-adsense-account" content="ca-pub-3793390054330330">
    <script data-ad-client="ca-pub-3793390054330330" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        .font-mono { font-family: 'JetBrains Mono', monospace; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        
        /* Syntax Highlighting */
        .json-key { color: #9cdcfe; } /* Light Blue */
        .json-string { color: #ce9178; } /* Orange/Red */
        .json-number { color: #b5cea8; } /* Light Green */
        .json-boolean { color: #569cd6; } /* Blue */
        .json-null { color: #569cd6; } /* Blue */
        
        /* Scrollbars */
        .custom-scrollbar::-webkit-scrollbar { width: 8px; height: 8px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #1e293b; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #64748b; }
    </style>
</head>
<body class="bg-slate-900 text-slate-300 flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-slate-800 border-b border-slate-700 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="bg-yellow-500 text-slate-900 p-2 rounded-lg">
                        <i class="fa-solid fa-code"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-white">JSONTool</span>
                </div>
                <div class="flex items-center gap-6 text-sm font-medium text-slate-400">
                    <a href="../../index.html" class="hover:text-yellow-400 transition">Home</a>
                    <a href="https://jansuchnaforall.blogspot.com" target="_blank" class="hover:text-yellow-400 transition">Blog</a>
                    <a href="../../pages/contact.html" class="hover:text-yellow-400 transition">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 py-8 sm:px-6 w-full">
        
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-bold text-white mb-3">JSON Formatter & Validator</h1>
            <p class="text-slate-400 text-lg max-w-2xl mx-auto">
                Beautify, minify, and validate your JSON data. Fix common errors and view structured data.
            </p>
        </div>

        <!-- Toolbar -->
        <div class="flex flex-wrap items-center justify-between gap-4 mb-4 bg-slate-800 p-4 rounded-xl border border-slate-700 shadow-sm">
            <div class="flex flex-wrap gap-2">
                <!-- Upload Button (New) -->
                <label class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2 cursor-pointer">
                    <i class="fa-solid fa-upload"></i> Upload
                    <input type="file" id="fileUpload" accept=".json,.txt" class="hidden">
                </label>

                <button id="formatBtn" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                    <i class="fa-solid fa-align-left"></i> Format
                </button>
                <button id="minifyBtn" class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                    <i class="fa-solid fa-compress"></i> Minify
                </button>
                <button id="sampleBtn" class="text-slate-400 hover:text-white px-3 py-2 text-sm transition underline">
                    Load Sample
                </button>
            </div>
            
            <div class="flex flex-wrap gap-2">
                <!-- Download Button (New) -->
                <button id="downloadBtn" class="bg-green-700 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                    <i class="fa-solid fa-download"></i> Save
                </button>

                <button id="copyBtn" class="bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                    <i class="fa-regular fa-copy"></i> Copy
                </button>
                <button id="clearBtn" class="bg-red-900/50 hover:bg-red-900 text-red-200 px-4 py-2 rounded-lg text-sm font-bold transition flex items-center gap-2">
                    <i class="fa-solid fa-trash"></i> Clear
                </button>
            </div>
        </div>

        <!-- Editor Area -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 h-[600px]">
            
            <!-- Input -->
            <div class="flex flex-col">
                <div class="flex justify-between items-center mb-2 px-1">
                    <span class="text-xs font-bold uppercase text-slate-500">Input (Paste Here)</span>
                    <span id="inputSize" class="text-xs text-slate-500">0 B</span>
                </div>
                <div class="flex-grow relative group">
                    <textarea id="jsonInput" class="w-full h-full bg-slate-800 text-slate-300 border border-slate-700 rounded-xl p-4 font-mono text-sm focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition resize-none custom-scrollbar leading-relaxed" placeholder='{"paste": "your_json_here"}' spellcheck="false"></textarea>
                </div>
            </div>

            <!-- Output -->
            <div class="flex flex-col">
                <div class="flex justify-between items-center mb-2 px-1">
                    <span class="text-xs font-bold uppercase text-slate-500">Output (Read Only)</span>
                    <span id="statusBadge" class="text-xs bg-slate-700 text-slate-300 px-2 py-0.5 rounded">Ready</span>
                </div>
                <div class="flex-grow relative bg-slate-800 border border-slate-700 rounded-xl overflow-hidden">
                    <pre id="jsonOutput" class="w-full h-full p-4 font-mono text-sm overflow-auto custom-scrollbar text-slate-300 leading-relaxed select-text"></pre>
                    
                    <!-- Error Overlay -->
                    <div id="errorOverlay" class="absolute inset-0 bg-slate-900/90 flex flex-col items-center justify-center text-center p-6 hidden backdrop-blur-sm">
                        <i class="fa-solid fa-triangle-exclamation text-red-500 text-4xl mb-4"></i>
                        <h3 class="text-lg font-bold text-white mb-2">Invalid JSON</h3>
                        <p id="errorMsg" class="text-red-300 font-mono text-sm bg-red-900/30 p-3 rounded border border-red-800/50 max-w-full break-words"></p>
                    </div>
                </div>
            </div>

        </div>

        <!-- Info Section -->
        <div class="mt-8 bg-slate-800 rounded-xl border border-slate-700 p-6">
            <h3 class="font-bold text-white mb-2"><i class="fa-solid fa-circle-info text-blue-400 mr-2"></i>About JSON Formatter</h3>
            <p class="text-sm text-slate-400">
                This tool helps you validate, format, and minify JSON data. It runs entirely in your browser, ensuring your data remains private and is never sent to any server. Useful for debugging API responses and configuration files.
            </p>
        </div>

    </main>

    <footer class="bg-slate-800 border-t border-slate-700 mt-auto">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-slate-500">
                &copy; 2023 Free Online Tools. <a href="../../pages/privacy.html" class="text-yellow-500 hover:text-yellow-400">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <script>
        (function() {
            const jsonInput = document.getElementById('jsonInput');
            const jsonOutput = document.getElementById('jsonOutput');
            const formatBtn = document.getElementById('formatBtn');
            const minifyBtn = document.getElementById('minifyBtn');
            const copyBtn = document.getElementById('copyBtn');
            const clearBtn = document.getElementById('clearBtn');
            const sampleBtn = document.getElementById('sampleBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const fileUpload = document.getElementById('fileUpload');
            
            const errorOverlay = document.getElementById('errorOverlay');
            const errorMsg = document.getElementById('errorMsg');
            const statusBadge = document.getElementById('statusBadge');
            const inputSize = document.getElementById('inputSize');

            // Process JSON
            function processJSON(mode = 'format') {
                const raw = jsonInput.value.trim();
                
                if (!raw) {
                    jsonOutput.innerHTML = '';
                    hideError();
                    updateStatus("Ready", "bg-slate-700 text-slate-300");
                    return;
                }

                try {
                    const parsed = JSON.parse(raw);
                    let result = '';

                    if (mode === 'format') {
                        // 4 space indentation
                        result = JSON.stringify(parsed, null, 4);
                        jsonOutput.innerHTML = syntaxHighlight(result);
                    } else {
                        // Minify
                        result = JSON.stringify(parsed);
                        jsonOutput.textContent = result; // No highlighting for minified
                    }

                    hideError();
                    updateStatus("Valid JSON", "bg-green-900 text-green-300");
                } catch (e) {
                    showError(e.message);
                    updateStatus("Invalid JSON", "bg-red-900 text-red-300");
                }
            }

            // Syntax Highlighting Logic
            function syntaxHighlight(json) {
                if (typeof json != 'string') {
                    json = JSON.stringify(json, undefined, 2);
                }
                json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
                
                return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                    let cls = 'json-number';
                    if (/^"/.test(match)) {
                        if (/:$/.test(match)) {
                            cls = 'json-key';
                        } else {
                            cls = 'json-string';
                        }
                    } else if (/true|false/.test(match)) {
                        cls = 'json-boolean';
                    } else if (/null/.test(match)) {
                        cls = 'json-null';
                    }
                    return '<span class="' + cls + '">' + match + '</span>';
                });
            }

            // Utilities
            function showError(msg) {
                errorOverlay.classList.remove('hidden');
                errorMsg.textContent = msg;
            }

            function hideError() {
                errorOverlay.classList.add('hidden');
            }

            function updateStatus(text, classes) {
                statusBadge.textContent = text;
                statusBadge.className = `text-xs px-2 py-0.5 rounded font-bold ${classes}`;
            }

            function formatBytes(bytes) {
                if (bytes === 0) return '0 B';
                const k = 1024;
                const sizes = ['B', 'KB', 'MB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

            function updateSize() {
                inputSize.textContent = formatBytes(new Blob([jsonInput.value]).size);
            }

            // Event Listeners
            formatBtn.addEventListener('click', () => processJSON('format'));
            minifyBtn.addEventListener('click', () => processJSON('minify'));

            jsonInput.addEventListener('input', () => {
                updateSize();
                if(jsonInput.value.trim() === "") {
                     jsonOutput.innerHTML = "";
                     hideError();
                }
            });

            clearBtn.addEventListener('click', () => {
                jsonInput.value = '';
                jsonOutput.innerHTML = '';
                inputSize.textContent = '0 B';
                hideError();
                updateStatus("Ready", "bg-slate-700 text-slate-300");
                fileUpload.value = ''; // Reset file input
            });

            copyBtn.addEventListener('click', () => {
                const content = jsonOutput.textContent;
                if(!content) return;
                
                navigator.clipboard.writeText(content).then(() => {
                    const original = copyBtn.innerHTML;
                    copyBtn.innerHTML = '<i class="fa-solid fa-check"></i> Copied';
                    copyBtn.classList.add('text-green-400');
                    setTimeout(() => {
                        copyBtn.innerHTML = original;
                        copyBtn.classList.remove('text-green-400');
                    }, 2000);
                });
            });

            // Upload Logic
            fileUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if(!file) return;

                const reader = new FileReader();
                reader.onload = (e) => {
                    jsonInput.value = e.target.result;
                    updateSize();
                    processJSON('format'); // Auto format on load
                };
                reader.readAsText(file);
            });

            // Download Logic
            downloadBtn.addEventListener('click', () => {
                const content = jsonOutput.textContent;
                if(!content) {
                    alert("Nothing to download!");
                    return;
                }

                const blob = new Blob([content], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `formatted_${Date.now()}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            });

            sampleBtn.addEventListener('click', () => {
                const sample = {
                    "tool": "JSON Formatter",
                    "features": ["Beautify", "Minify", "Validate"],
                    "active": true,
                    "version": 1.0,
                    "author": {
                        "name": "Free Tools",
                        "website": null
                    }
                };
                jsonInput.value = JSON.stringify(sample);
                processJSON('format');
                updateSize();
            });

        })();
    </script>
</body>
</html>