
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Compressor | Reduce PDF Size Online</title>
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="Compress PDF files online for free. Reduce PDF size to 100KB, 200KB, etc. Best for compressing scanned documents for government forms.">
    <meta name="keywords" content="pdf compressor, reduce pdf size, compress pdf online, pdf size reducer, pdf optimizer, free pdf tool">
    <meta name="author" content="Free Online Tools">

    <!-- Open Graph -->
    <meta property="og:title" content="Free PDF Compressor">
    <meta property="og:description" content="Reduce PDF file size instantly in your browser.">
    
    <!-- User's AdSense -->
    <meta name="google-adsense-account" content="ca-pub-3793390054330330">
    <script data-ad-client="ca-pub-3793390054330330" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }
        .drag-active { border-color: #dc2626; background-color: #fef2f2; }
        
        /* Custom Progress Bar */
        .progress-bar {
            transition: width 0.3s ease;
        }
    </style>
</head>
<body class="bg-gray-50 text-slate-800 flex flex-col min-h-screen">

    <!-- Navigation -->
    <nav class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center gap-3">
                    <div class="bg-red-600 text-white p-2 rounded-lg">
                        <i class="fa-solid fa-file-zipper"></i>
                    </div>
                    <span class="font-bold text-xl tracking-tight text-gray-900">PDFCompress</span>
                </div>
                <div class="flex items-center gap-6 text-sm font-medium text-gray-500">
                    <a href="index.html" class="hover:text-red-600 transition">Home</a>
                    <a href="https://jansuchnaforall.blogspot.com" target="_blank" class="hover:text-red-600 transition">Blog</a>
                    <a href="contact.html" class="hover:text-red-600 transition">Contact</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow max-w-5xl mx-auto px-4 py-8 sm:px-6 w-full">
        
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 mb-3">PDF Compressor</h1>
            <p class="text-gray-500 text-lg max-w-2xl mx-auto">
                Shrink your PDF file size quickly. Perfect for scanned documents and application forms.
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 items-start">
            
            <!-- Left Column: Controls -->
            <div class="lg:col-span-5 space-y-6">
                
                <!-- Upload Card -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                    <div class="p-5 border-b border-gray-100 bg-gray-50">
                        <h3 class="font-semibold text-gray-800"><i class="fa-solid fa-upload mr-2 text-red-500"></i>Upload PDF</h3>
                    </div>
                    <div class="p-6">
                        <label id="dropZone" class="flex flex-col items-center justify-center w-full h-40 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-gray-100 transition duration-200 group">
                            <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                <i class="fa-solid fa-cloud-arrow-up text-3xl text-gray-400 group-hover:text-red-500 mb-3 transition"></i>
                                <p class="mb-1 text-sm text-gray-500"><span class="font-semibold text-gray-700">Click to upload</span> or drag</p>
                                <p class="text-xs text-gray-400">PDF files only (Max 20MB)</p>
                            </div>
                            <input type="file" id="fileInput" accept="application/pdf" class="hidden">
                        </label>
                        
                        <!-- File Info -->
                        <div id="fileInfo" class="hidden mt-4 bg-red-50 border border-red-100 p-3 rounded-lg flex items-center justify-between">
                            <div class="flex items-center gap-3 overflow-hidden">
                                <div class="bg-red-100 p-2 rounded text-red-600">
                                    <i class="fa-solid fa-file-pdf"></i>
                                </div>
                                <div class="truncate">
                                    <p id="fileName" class="text-sm font-medium text-gray-800 truncate">filename.pdf</p>
                                    <p id="fileSize" class="text-xs text-gray-500">0 KB</p>
                                </div>
                            </div>
                            <button id="clearBtn" class="text-gray-400 hover:text-red-500"><i class="fa-solid fa-xmark"></i></button>
                        </div>
                    </div>
                </div>

                <!-- Compression Settings -->
                <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
                    <div class="p-5 border-b border-gray-100 bg-gray-50">
                        <h3 class="font-semibold text-gray-800"><i class="fa-solid fa-sliders mr-2 text-red-500"></i>Compression Level</h3>
                    </div>
                    <div class="p-6 space-y-5">
                        
                        <div>
                            <div class="flex justify-between mb-2">
                                <label class="text-sm font-medium text-gray-700">Quality</label>
                                <span id="qualityVal" class="text-xs font-bold bg-gray-100 px-2 py-1 rounded">Medium (50%)</span>
                            </div>
                            <input type="range" id="qualityRange" min="0.1" max="1.0" step="0.1" value="0.5" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-red-600">
                            <div class="flex justify-between text-xs text-gray-400 mt-1">
                                <span>High Compression</span>
                                <span>Low Compression</span>
                            </div>
                        </div>

                        <!-- Image Resolution (DPI) -->
                        <div>
                             <label class="text-sm font-medium text-gray-700 mb-2 block">Resolution (DPI)</label>
                             <select id="dpiSelect" class="block w-full border-gray-300 rounded-lg shadow-sm focus:ring-red-500 focus:border-red-500 sm:text-sm p-2.5 border">
                                <option value="0.5">Low (72 DPI) - Screen</option>
                                <option value="1.0" selected>Medium (150 DPI) - Standard</option>
                                <option value="2.0">High (300 DPI) - Print</option>
                             </select>
                             <p class="text-xs text-gray-400 mt-1">Lower DPI = Smaller File Size</p>
                        </div>

                        <button id="compressBtn" class="w-full bg-red-600 hover:bg-red-700 text-white font-medium py-3 px-4 rounded-lg shadow transition duration-150 ease-in-out flex justify-center items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            <i class="fa-solid fa-compress"></i> Compress PDF
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Column: Status & Download -->
            <div class="lg:col-span-7 space-y-6">
                
                <div class="bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden min-h-[400px] flex flex-col justify-center items-center p-8 text-center">
                    
                    <!-- Empty State -->
                    <div id="emptyState" class="text-gray-400">
                        <i class="fa-regular fa-file-pdf text-6xl mb-4 opacity-30"></i>
                        <p>Upload a PDF to start compressing</p>
                    </div>

                    <!-- Progress State -->
                    <div id="progressState" class="hidden w-full max-w-sm">
                        <div class="mb-4">
                            <i class="fa-solid fa-gear fa-spin text-4xl text-red-500 mb-4"></i>
                            <h3 class="text-lg font-bold text-gray-900">Compressing...</h3>
                            <p id="pageStatus" class="text-sm text-gray-500 mt-1">Processing Page 1 of --</p>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2.5 mb-2 overflow-hidden">
                            <div id="progressBar" class="bg-red-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                        </div>
                        <p class="text-xs text-gray-400">Please do not close this tab.</p>
                    </div>

                    <!-- Success State -->
                    <div id="successState" class="hidden w-full max-w-md fade-in">
                        <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fa-solid fa-check text-3xl text-green-600"></i>
                        </div>
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Compression Complete!</h2>
                        
                        <div class="bg-gray-50 rounded-xl p-4 border border-gray-200 my-6 flex justify-around items-center">
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold">Before</p>
                                <p id="sizeBefore" class="text-lg font-mono text-gray-600 line-through">0 MB</p>
                            </div>
                            <div class="text-gray-300">
                                <i class="fa-solid fa-arrow-right"></i>
                            </div>
                            <div>
                                <p class="text-xs text-gray-500 uppercase font-bold">After</p>
                                <p id="sizeAfter" class="text-lg font-mono text-green-600 font-bold">0 MB</p>
                            </div>
                        </div>

                        <div id="savingBadge" class="inline-block bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full mb-6">
                            Saved <span id="savedPercent">0%</span>
                        </div>

                        <a id="downloadBtn" class="block w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition transform hover:scale-[1.02] cursor-pointer">
                            <i class="fa-solid fa-download mr-2"></i> Download Compressed PDF
                        </a>
                        
                        <button onclick="location.reload()" class="mt-4 text-sm text-gray-500 hover:text-gray-700 underline">Compress Another File</button>
                    </div>

                </div>

                <!-- Info Box -->
                <div class="bg-blue-50 p-4 rounded-xl border border-blue-100">
                    <h4 class="font-bold text-blue-800 mb-1 flex items-center gap-2">
                        <i class="fa-solid fa-circle-info"></i> How it works?
                    </h4>
                    <p class="text-sm text-blue-700">
                        This tool converts each page of your PDF into an optimized image and rebuilds the PDF. This is highly effective for reducing the size of <strong>scanned documents, certificates, and forms</strong>. Note: Text may become non-selectable.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-white border-t border-gray-200 mt-auto">
        <div class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <p class="text-center text-sm text-gray-500">
                &copy; 2023 Free Online Tools. <a href="privacy.html" class="text-red-600 hover:text-red-500">Privacy Policy</a>
            </p>
        </div>
    </footer>

    <script>
        // Setup PDF.js worker
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';

        (function() {
            const fileInput = document.getElementById('fileInput');
            const dropZone = document.getElementById('dropZone');
            const fileInfo = document.getElementById('fileInfo');
            const fileNameEl = document.getElementById('fileName');
            const fileSizeEl = document.getElementById('fileSize');
            const clearBtn = document.getElementById('clearBtn');
            const compressBtn = document.getElementById('compressBtn');
            
            const qualityRange = document.getElementById('qualityRange');
            const qualityVal = document.getElementById('qualityVal');
            const dpiSelect = document.getElementById('dpiSelect');
            
            const emptyState = document.getElementById('emptyState');
            const progressState = document.getElementById('progressState');
            const successState = document.getElementById('successState');
            const progressBar = document.getElementById('progressBar');
            const pageStatus = document.getElementById('pageStatus');
            
            const sizeBefore = document.getElementById('sizeBefore');
            const sizeAfter = document.getElementById('sizeAfter');
            const savedPercent = document.getElementById('savedPercent');
            const downloadBtn = document.getElementById('downloadBtn');

            let currentFile = null;

            // --- Drag & Drop ---
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(e => dropZone.addEventListener(e, (ev) => { ev.preventDefault(); ev.stopPropagation(); }));
            dropZone.addEventListener('dragenter', () => dropZone.classList.add('drag-active'));
            dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-active'));
            dropZone.addEventListener('drop', (e) => {
                dropZone.classList.remove('drag-active');
                handleFile(e.dataTransfer.files[0]);
            });
            fileInput.addEventListener('change', (e) => handleFile(e.target.files[0]));

            function handleFile(file) {
                if (!file || file.type !== 'application/pdf') {
                    alert("Please upload a PDF file.");
                    return;
                }
                currentFile = file;
                
                fileNameEl.textContent = file.name;
                fileSizeEl.textContent = formatBytes(file.size);
                
                dropZone.classList.add('hidden');
                fileInfo.classList.remove('hidden');
                compressBtn.disabled = false;
                
                // Reset states
                successState.classList.add('hidden');
                progressState.classList.add('hidden');
                emptyState.classList.remove('hidden');
            }

            clearBtn.addEventListener('click', () => {
                currentFile = null;
                fileInput.value = '';
                fileInfo.classList.add('hidden');
                dropZone.classList.remove('hidden');
                compressBtn.disabled = true;
                successState.classList.add('hidden');
                progressState.classList.add('hidden');
                emptyState.classList.remove('hidden');
            });

            // Update Quality Text
            qualityRange.addEventListener('input', () => {
                const val = parseFloat(qualityRange.value);
                let text = "Medium (50%)";
                if(val >= 0.8) text = `High (${Math.round(val*100)}%)`;
                else if(val <= 0.3) text = `Low (${Math.round(val*100)}%)`;
                else text = `Medium (${Math.round(val*100)}%)`;
                qualityVal.textContent = text;
            });

            // --- Compression Logic ---
            compressBtn.addEventListener('click', async () => {
                if(!currentFile) return;

                // UI Update
                emptyState.classList.add('hidden');
                successState.classList.add('hidden');
                progressState.classList.remove('hidden');
                compressBtn.disabled = true;
                
                const quality = parseFloat(qualityRange.value);
                const scale = parseFloat(dpiSelect.value); // Scale factor for resolution

                try {
                    const arrayBuffer = await currentFile.arrayBuffer();
                    const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                    const totalPages = pdf.numPages;
                    
                    const { jsPDF } = window.jspdf;
                    // Create PDF with A4 dimensions (mm)
                    const doc = new jsPDF(); 
                    const pageWidth = 210; 
                    const pageHeight = 297;

                    for (let i = 1; i <= totalPages; i++) {
                        // Update Progress
                        const percent = Math.round(((i-1) / totalPages) * 100);
                        progressBar.style.width = `${percent}%`;
                        pageStatus.textContent = `Processing Page ${i} of ${totalPages}...`;

                        // Render Page
                        const page = await pdf.getPage(i);
                        const viewport = page.getViewport({ scale: scale }); // Scale affects resolution
                        
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;

                        await page.render({ canvasContext: context, viewport: viewport }).promise;

                        // Compress Image (JPEG)
                        const imgData = canvas.toDataURL('image/jpeg', quality);

                        // Add to new PDF
                        if (i > 1) doc.addPage();
                        doc.addImage(imgData, 'JPEG', 0, 0, pageWidth, pageHeight);
                    }

                    // Done
                    progressBar.style.width = '100%';
                    pageStatus.textContent = "Finalizing PDF...";
                    
                    // Generate Blob
                    const pdfBlob = doc.output('blob');
                    
                    // Show Success
                    progressState.classList.add('hidden');
                    successState.classList.remove('hidden');
                    
                    sizeBefore.textContent = formatBytes(currentFile.size);
                    sizeAfter.textContent = formatBytes(pdfBlob.size);
                    
                    const saved = ((currentFile.size - pdfBlob.size) / currentFile.size * 100).toFixed(1);
                    if(saved > 0) {
                        savedPercent.textContent = `${saved}%`;
                        document.getElementById('savingBadge').className = "inline-block bg-green-100 text-green-800 text-xs font-bold px-3 py-1 rounded-full mb-6";
                    } else {
                        savedPercent.textContent = "0% (Already Optimized)";
                        document.getElementById('savingBadge').className = "inline-block bg-yellow-100 text-yellow-800 text-xs font-bold px-3 py-1 rounded-full mb-6";
                    }

                    const url = URL.createObjectURL(pdfBlob);
                    downloadBtn.href = url;
                    downloadBtn.download = `compressed_${currentFile.name}`;
                    
                    compressBtn.disabled = false;

                } catch (err) {
                    console.error(err);
                    alert("An error occurred during compression.");
                    progressState.classList.add('hidden');
                    emptyState.classList.remove('hidden');
                    compressBtn.disabled = false;
                }
            });

            function formatBytes(bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }

        })();
    </script>
</body>
</html>